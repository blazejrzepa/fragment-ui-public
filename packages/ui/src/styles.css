@import "@fragment_ui/tokens/dist/tokens.css";
@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  color-scheme: light dark;
}

/* Global font rendering optimization - Chrome specific */
/* Apply to text elements only, not layout elements */
p, span, a, h1, h2, h3, h4, h5, h6, li, td, th, label, button, input, textarea, select, code, pre {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* Chrome: use auto instead of optimizeLegibility to prevent blur */
  text-rendering: auto;
  /* Chrome: prevent subpixel rendering blur */
  -webkit-text-stroke: 0.35px transparent;
  /* Chrome: force hardware acceleration for text only */
  transform: translate3d(0, 0, 0);
  -webkit-transform: translate3d(0, 0, 0);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/* Exclude layout elements from transform to prevent positioning issues */
header, nav, aside, main, section, article, div, body, html {
  /* Only font smoothing, no transform */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: auto;
  -webkit-text-stroke: 0.35px transparent;
}

@layer base {
  /* Apply motion tokens to components */
  button, a {
    transition-duration: var(--motion-duration-base, 200ms);
    transition-timing-function: var(--motion-easing-ease-in-out, cubic-bezier(0.4, 0, 0.2, 1));
  }

  /* Accordion animations */
  @keyframes accordion-down {
    from {
      height: 0;
    }
    to {
      height: var(--radix-accordion-content-height);
    }
  }

  @keyframes accordion-up {
    from {
      height: var(--radix-accordion-content-height);
    }
    to {
      height: 0;
    }
  }
}

@layer utilities {
  .animate-accordion-down {
    animation: accordion-down 0.2s ease-out;
  }

  .animate-accordion-up {
    animation: accordion-up 0.2s ease-out;
  }


  /* Collapsible animations */
  @keyframes collapsible-down {
    from {
      height: 0;
    }
    to {
      height: var(--radix-collapsible-content-height);
    }
  }

  @keyframes collapsible-up {
    from {
      height: var(--radix-collapsible-content-height);
    }
    to {
      height: 0;
    }
  }

  .animate-collapsible-down {
    animation: collapsible-down 0.2s ease-out;
  }

  .animate-collapsible-up {
    animation: collapsible-up 0.2s ease-out;
  }
}

/* NavigationMenu styles - ensure text color stays foreground-primary on hover/focus */
/* Using inline styles in component + CSS for maximum specificity */
@layer components {
  /* Button solid variant - ensure text color uses token */
  /* Using data attribute selector with high specificity to override Tailwind utilities */
  button[data-button-variant="solid"],
  button[data-button-variant="solid"] *,
  button[data-button-variant="solid"] span,
  button[data-button-variant="solid"] svg,
  button[data-button-variant="solid"] svg path {
    color: var(--color-button-solid-text) !important;
  }

  button[data-button-variant="solid"]:hover,
  button[data-button-variant="solid"]:hover *,
  button[data-button-variant="solid"]:hover span,
  button[data-button-variant="solid"]:hover svg,
  button[data-button-variant="solid"]:hover svg path {
    color: var(--color-button-solid-text) !important;
  }

  button[data-button-variant="solid"]:disabled,
  button[data-button-variant="solid"]:disabled *,
  button[data-button-variant="solid"]:disabled span,
  button[data-button-variant="solid"]:disabled svg,
  button[data-button-variant="solid"]:disabled svg path {
    color: var(--color-button-solid-text) !important;
  }
  /* NavigationMenuLink - preserve text color on hover/focus, no underline */
  /* Inline style in component handles text-decoration, but we add CSS as backup */
  [data-radix-navigation-menu-link],
  [data-radix-navigation-menu-link] a,
  [data-radix-navigation-menu-link] * {
    color: var(--color-fg-base) !important;
    text-decoration: none !important;
  }
  
  /* Higher specificity for prose context - override .prose a */
  .prose [data-radix-navigation-menu-link],
  .prose [data-radix-navigation-menu-link] a,
  .prose [data-radix-navigation-menu-link] *,
  nav[aria-label="Main"] [data-radix-navigation-menu-link],
  nav[aria-label="Main"] [data-radix-navigation-menu-link] a,
  nav[aria-label="Main"] [data-radix-navigation-menu-link] * {
    color: var(--color-fg-base) !important;
    text-decoration: none !important;
  }
  
  [data-radix-navigation-menu-link]:hover,
  [data-radix-navigation-menu-link]:focus,
  [data-radix-navigation-menu-link]:focus-visible,
  [data-radix-navigation-menu-link]:active,
  [data-radix-navigation-menu-link] a:hover,
  [data-radix-navigation-menu-link] a:focus,
  [data-radix-navigation-menu-link] a:focus-visible,
  [data-radix-navigation-menu-link] a:active,
  [data-radix-navigation-menu-link] *:hover,
  [data-radix-navigation-menu-link] *:focus {
    color: var(--color-fg-base) !important;
    text-decoration: none !important;
  }
  
  /* Higher specificity for prose context - hover/focus states */
  .prose [data-radix-navigation-menu-link]:hover,
  .prose [data-radix-navigation-menu-link]:focus,
  .prose [data-radix-navigation-menu-link] a:hover,
  .prose [data-radix-navigation-menu-link] a:focus,
  .prose [data-radix-navigation-menu-link] *:hover,
  .prose [data-radix-navigation-menu-link] *:focus,
  nav[aria-label="Main"] [data-radix-navigation-menu-link]:hover,
  nav[aria-label="Main"] [data-radix-navigation-menu-link]:focus,
  nav[aria-label="Main"] [data-radix-navigation-menu-link] a:hover,
  nav[aria-label="Main"] [data-radix-navigation-menu-link] a:focus,
  nav[aria-label="Main"] [data-radix-navigation-menu-link] *:hover,
  nav[aria-label="Main"] [data-radix-navigation-menu-link] *:focus {
    color: var(--color-fg-base) !important;
    text-decoration: none !important;
  }
  
  /* NavigationMenuTrigger - preserve text color on hover/focus, no underline */
  [data-radix-navigation-menu-trigger],
  [data-radix-navigation-menu-trigger] a,
  [data-radix-navigation-menu-trigger] * {
    color: var(--color-fg-base) !important;
    text-decoration: none !important;
  }
  
  /* Higher specificity for prose context */
  .prose [data-radix-navigation-menu-trigger],
  .prose [data-radix-navigation-menu-trigger] a,
  .prose [data-radix-navigation-menu-trigger] *,
  nav[aria-label="Main"] [data-radix-navigation-menu-trigger],
  nav[aria-label="Main"] [data-radix-navigation-menu-trigger] a,
  nav[aria-label="Main"] [data-radix-navigation-menu-trigger] * {
    color: var(--color-fg-base) !important;
    text-decoration: none !important;
  }
  
  [data-radix-navigation-menu-trigger]:hover,
  [data-radix-navigation-menu-trigger]:focus,
  [data-radix-navigation-menu-trigger]:focus-visible,
  [data-radix-navigation-menu-trigger]:active,
  [data-radix-navigation-menu-trigger] a:hover,
  [data-radix-navigation-menu-trigger] a:focus,
  [data-radix-navigation-menu-trigger] a:focus-visible,
  [data-radix-navigation-menu-trigger] a:active,
  [data-radix-navigation-menu-trigger] *:hover,
  [data-radix-navigation-menu-trigger] *:focus {
    color: var(--color-fg-base) !important;
    text-decoration: none !important;
  }
  
  /* Higher specificity for prose context - hover/focus states */
  .prose [data-radix-navigation-menu-trigger]:hover,
  .prose [data-radix-navigation-menu-trigger]:focus,
  .prose [data-radix-navigation-menu-trigger] a:hover,
  .prose [data-radix-navigation-menu-trigger] a:focus,
  .prose [data-radix-navigation-menu-trigger] *:hover,
  .prose [data-radix-navigation-menu-trigger] *:focus,
  nav[aria-label="Main"] [data-radix-navigation-menu-trigger]:hover,
  nav[aria-label="Main"] [data-radix-navigation-menu-trigger]:focus,
  nav[aria-label="Main"] [data-radix-navigation-menu-trigger] a:hover,
  nav[aria-label="Main"] [data-radix-navigation-menu-trigger] a:focus,
  nav[aria-label="Main"] [data-radix-navigation-menu-trigger] *:hover,
  nav[aria-label="Main"] [data-radix-navigation-menu-trigger] *:focus {
    color: var(--color-fg-base) !important;
    text-decoration: none !important;
  }
  
  /* Hide default Radix UI trigger icon */
  [data-radix-navigation-menu-trigger] > span:last-child {
    display: none !important;
  }
  
  /* Ensure child elements also preserve color and no underline */
  [data-radix-navigation-menu-link] *,
  [data-radix-navigation-menu-link]:hover *,
  [data-radix-navigation-menu-link]:focus *,
  [data-radix-navigation-menu-link] a *,
  [data-radix-navigation-menu-link] a:hover *,
  [data-radix-navigation-menu-link] a:focus * {
    color: inherit;
    text-decoration: none;
  }
  
  /* Force viewport wrapper to align to left edge of trigger */
  [data-radix-navigation-menu-root] > div[style*="position"] {
    left: 0 !important;
    transform: translateX(0) !important;
    justify-content: flex-start !important;
  }
  
  /* Force viewport to align to left edge */
  [data-radix-navigation-menu-viewport] {
    left: 0 !important;
    transform: translateX(0) !important;
  }
  
  /* Force content to align to left edge within viewport */
  [data-radix-navigation-menu-content] {
    left: 0 !important;
    transform: translateX(0) !important;
  }
  
  /* Override Radix UI positioning for viewport wrapper */
  [data-radix-navigation-menu-root] > div:has([data-radix-navigation-menu-viewport]) {
    left: 0 !important;
    transform: translateX(0) !important;
    justify-content: flex-start !important;
  }
  
  /* Higher specificity for prose context - child elements */
  .prose [data-radix-navigation-menu-link] *,
  .prose [data-radix-navigation-menu-link] a *,
  nav[aria-label="Main"] [data-radix-navigation-menu-link] *,
  nav[aria-label="Main"] [data-radix-navigation-menu-link] a *,
  .prose [data-radix-navigation-menu-trigger] *,
  .prose [data-radix-navigation-menu-trigger] a *,
  nav[aria-label="Main"] [data-radix-navigation-menu-trigger] *,
  nav[aria-label="Main"] [data-radix-navigation-menu-trigger] a * {
    color: inherit !important;
    text-decoration: none !important;
  }
  
  /* CodeBlock - exclude from prose styles */
  /* Use higher specificity to override prose styles */
  /* CodeBlock styles - matching shadcn/ui appearance */
  /* Note: margin is set inline in CodeBlock component wrapper div */
  
  .not-prose pre,
  article .not-prose pre,
  .prose .not-prose pre,
  .document-content .not-prose pre {
    /* Reset prose styles and apply CodeBlock styles */
    background-color: var(--color-surface-1) !important;
    padding: 1rem 1.25rem !important;
    border-radius: 0.5rem !important;
    border: 1px solid var(--color-border-base) !important;
    max-height: 400px !important;
    overflow-y: auto !important;
    margin: 0 !important;
  }
  
  /* Shiki-generated pre inside CodeBlock wrapper */
  .not-prose > div > pre,
  article .not-prose > div > pre,
  .document-content .not-prose > div > pre {
    /* Ensure Shiki pre uses our styles - matching shadcn/ui appearance */
    background-color: var(--color-surface-1) !important;
    padding: 1rem 1.25rem !important;
    border-radius: 0.5rem !important;
    border: 1px solid var(--color-border-base) !important;
    max-height: 400px !important;
    overflow-y: auto !important;
    margin: 0 !important;
  }
  
  /* Shiki-generated pre with data-theme attribute */
  .not-prose > div > pre[data-theme],
  article .not-prose > div > pre[data-theme] {
    /* Override Shiki's inline styles to match our design */
    background-color: var(--color-surface-1) !important;
    border: 1px solid var(--color-border-base) !important;
    padding: 1rem 1.25rem !important;
    margin: 0 !important;
  }
  
  /* Light mode Shiki pre */
  [data-theme="light"] .not-prose > div > pre[data-theme],
  :root:not([data-theme="dark"]) .not-prose > div > pre[data-theme] {
    background-color: var(--color-surface-1) !important;
    border-color: var(--color-border-base) !important;
    margin: 0 !important;
  }
  
  /* Dark mode Shiki pre */
  [data-theme="dark"] .not-prose > div > pre[data-theme] {
    background-color: var(--color-surface-1) !important;
    border-color: var(--color-border-base) !important;
    margin: 0 !important;
  }
  
  .not-prose pre code,
  article .not-prose pre code,
  .prose .not-prose pre code {
    /* Code inside pre - reset styles */
    background: transparent !important;
    padding: 0 !important;
    border-radius: 0 !important;
    margin: 0 !important;
    font-family: 'SF Mono', SFMono-Regular, Menlo, Consolas, 'Liberation Mono', monospace !important;
    font-weight: 300 !important;
  }

  /* Line numbers for CodeBlock */
  /* Shiki generates: <pre class="shiki"><code class="line-numbers"><span class="line">...</span></code></pre> */
  /* Based on shadcn/ui implementation */
  pre code.line-numbers,
  pre code[data-line-numbers],
  pre[class*="shiki"] code.line-numbers,
  pre[class*="shiki"] code[data-line-numbers],
  .not-prose pre code.line-numbers,
  .not-prose pre code[data-line-numbers],
  article .not-prose pre code.line-numbers,
  article .not-prose pre code[data-line-numbers],
  .not-prose pre[class*="shiki"] code.line-numbers,
  .not-prose pre[class*="shiki"] code[data-line-numbers],
  article .not-prose pre[class*="shiki"] code.line-numbers,
  article .not-prose pre[class*="shiki"] code[data-line-numbers] {
    counter-reset: line !important;
    padding-left: 0 !important;
    position: relative !important;
    display: block !important;
  }

  /* Each line gets a number using CSS counter */
  pre code.line-numbers .line,
  pre code[data-line-numbers] .line,
  .not-prose pre code.line-numbers .line,
  .not-prose pre code[data-line-numbers] .line {
    counter-increment: line !important;
    position: relative !important;
    display: inline-block !important;
    width: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
    padding-left: 4em !important;
    line-height: 1.7 !important;
    min-height: 1.7em !important;
  }

  /* Ensure empty lines are visible and numbered */
  pre code.line-numbers .line:empty,
  pre code[data-line-numbers] .line:empty,
  .not-prose pre code.line-numbers .line:empty,
  .not-prose pre code[data-line-numbers] .line:empty {
    display: inline-block !important;
    min-height: 1.7em !important;
  }

  /* Line number styling */
  pre code.line-numbers .line::before,
  pre code[data-line-numbers] .line::before,
  .not-prose pre code.line-numbers .line::before,
  .not-prose pre code[data-line-numbers] .line::before {
    content: counter(line) !important;
    position: absolute !important;
    left: 0 !important;
    top: 0 !important;
    width: 2em !important;
    text-align: right !important;
    padding-right: 0.5em !important;
    color: var(--color-fg-muted) !important;
    user-select: none !important;
    font-variant-numeric: tabular-nums !important;
    opacity: 0.6 !important;
    line-height: 1.7 !important;
    display: inline-block !important;
  }

  /* Dark mode line numbers */
  [data-theme="dark"] pre code.line-numbers .line::before,
  [data-theme="dark"] pre code[data-line-numbers] .line::before,
  [data-theme="dark"] .not-prose pre code.line-numbers .line::before,
  [data-theme="dark"] .not-prose pre code[data-line-numbers] .line::before {
    opacity: 0.5 !important;
  }

  /* Light mode line numbers */
  [data-theme="light"] pre code.line-numbers .line::before,
  [data-theme="light"] pre code[data-line-numbers] .line::before,
  :root:not([data-theme="dark"]) pre code.line-numbers .line::before,
  :root:not([data-theme="dark"]) pre code[data-line-numbers] .line::before,
  [data-theme="light"] .not-prose pre code.line-numbers .line::before,
  [data-theme="light"] .not-prose pre code[data-line-numbers] .line::before,
  :root:not([data-theme="dark"]) .not-prose pre code.line-numbers .line::before,
  :root:not([data-theme="dark"]) .not-prose pre code[data-line-numbers] .line::before {
    opacity: 0.6 !important;
  }
  
  .not-prose pre code,
  .document-content .not-prose pre code {
    background: transparent !important;
    padding: 0 !important;
    border-radius: 0 !important;
    color: var(--color-fg-base) !important;
    font-family: 'SF Mono', SFMono-Regular, Menlo, Consolas, 'Liberation Mono', monospace !important;
    font-size: inherit !important;
    line-height: 1.7 !important;
    font-weight: 300 !important;
    display: block !important;
    width: 100% !important;
    margin: 0 !important;
  }
  
  /* Force font-weight on all elements inside code blocks - maximum specificity */
  .not-prose pre *,
  .document-content .not-prose pre *,
  .not-prose pre code *,
  .document-content .not-prose pre code *,
  .not-prose pre code span,
  .document-content .not-prose pre code span,
  .not-prose pre code span *,
  .document-content .not-prose pre code span *,
  pre[class*="shiki"] code *,
  pre[class*="shiki"] code span,
  pre[class*="shiki"] code span *,
  .not-prose pre[class*="shiki"] code *,
  .not-prose pre[class*="shiki"] code span,
  .not-prose pre[class*="shiki"] code span *,
  /* Even more specific selectors to override Shiki's inline styles */
  .not-prose pre[style] code[style] span[style],
  .not-prose pre[style] code[style] span[style] *,
  .document-content .not-prose pre[style] code[style] span[style],
  .document-content .not-prose pre[style] code[style] span[style] *,
  pre[class*="shiki"][style] code[style] span[style],
  pre[class*="shiki"][style] code[style] span[style] *,
  .not-prose pre[class*="shiki"][style] code[style] span[style],
  .not-prose pre[class*="shiki"][style] code[style] span[style] * {
    font-weight: 300 !important;
    font-weight: 300 !important; /* Duplicate for extra emphasis */
  }
  
  /* Direct selectors for Shiki pre elements - remove margins */
  pre[class*="shiki"],
  .not-prose pre[class*="shiki"],
  article .not-prose pre[class*="shiki"],
  .document-content .not-prose pre[class*="shiki"] {
    margin: 0 !important;
  }

  /* CodeBlock wrapper div - remove margins */
  .relative.not-prose,
  .not-prose.relative {
    margin-top: 0 !important;
    margin-bottom: 0 !important;
  }

  /* Light mode CodeBlock */
  [data-theme="light"] .not-prose pre,
  :root:not([data-theme="dark"]) .not-prose pre {
    background-color: var(--color-surface-1) !important;
    border-color: var(--color-border-base) !important;
  }
  
  [data-theme="light"] .not-prose pre code,
  :root:not([data-theme="dark"]) .not-prose pre code {
    color: var(--foreground-primary) !important;
  }
  
  /* Dark mode CodeBlock */
  [data-theme="dark"] .not-prose pre {
    background-color: var(--color-surface-1) !important;
    border-color: var(--color-border-base) !important;
  }
  
  [data-theme="dark"] .not-prose pre code {
    color: var(--color-fg-base) !important;
  }
  
  /* DocumentContent - Typography styles for documentation content */
  /* Replaces .prose class - uses DS tokens */
  .document-content {
    font-family: Geist, ui-sans-serif, system-ui, sans-serif;
    color: var(--color-fg-base);
    width: 100%;
    max-width: 640px;
    margin-left: auto;
    margin-right: auto;
  }

  /* Constrain Article width while allowing responsive shrink */
  article.document-content {
    width: min(100%, 640px);
    max-width: 640px;
  }
  
  /* Headings in DocumentContent - using DS typography values from tailwind.config.ts */
  .document-content h1 {
    font-family: Geist, ui-sans-serif, system-ui, sans-serif;
    font-size: 36px; /* text-display-md from tailwind.config.ts */
    font-weight: 500; /* font-medium */
    line-height: 110%;
    letter-spacing: -0.72px;
    margin-top: 0;
    margin-bottom: 1rem;
    color: var(--color-fg-base);
  }
  
  .document-content h2 {
    font-family: Geist, ui-sans-serif, system-ui, sans-serif;
    font-size: 18px; /* text-lg - zmniejszone o 2 rozmiary z 24px */
    font-weight: 400; /* font-normal - zmniejszona grubość */
    line-height: 110%;
    margin-top: 2rem;
    margin-bottom: 1rem;
    color: var(--color-fg-base);
  }
  
  /* Typography styles for documentation content only - exclude components */
  /* Only apply to h3 that are direct children or in text content, not in component previews */
  .document-content > h3,
  .document-content h2 + h3,
  .document-content p + h3 {
    font-family: Geist, ui-sans-serif, system-ui, sans-serif;
    font-size: 18px; /* text-lg - zmniejszone o 1 rozmiar z 20px */
    font-weight: 400; /* font-normal - zmniejszona grubość */
    line-height: 110%;
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
    color: var(--color-fg-base);
  }
  
  /* Exclude accordion headers from document-content h3 styles - they have their own spacing */
  .document-content [data-orientation="vertical"] h3[class*="flex"] {
    margin-top: 1rem !important; /* mt-4 = 16px */
    margin-bottom: 1rem !important; /* mb-4 = 16px */
  }
  
  /* Components in .preview use their own DS tokens - no overrides needed */
  /* Components outside .preview also use their own DS tokens */
  
  .document-content h4 {
    font-family: Geist, ui-sans-serif, system-ui, sans-serif;
    font-size: 22px; /* text-2xl from tailwind.config.ts */
    font-weight: 600; /* font-semibold */
    line-height: 150%;
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
    color: var(--color-fg-base);
  }
  
  .document-content h5 {
    font-family: Geist, ui-sans-serif, system-ui, sans-serif;
    font-size: 20px; /* text-xl from tailwind.config.ts */
    font-weight: 600; /* font-semibold */
    line-height: 150%;
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
    color: var(--color-fg-base);
  }
  
  .document-content h6 {
    font-family: Geist, ui-sans-serif, system-ui, sans-serif;
    font-size: 18px; /* text-lg from tailwind.config.ts */
    font-weight: 600; /* font-semibold */
    line-height: 150%;
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
    color: var(--color-fg-base);
  }
  
  /* Paragraphs in DocumentContent */
  .document-content p {
    color: var(--color-fg-base);
    font-family: Geist, sans-serif;
    font-size: 15px;
    font-style: normal;
    font-weight: 300; /* Light */
    line-height: 160%;
    margin-top: 0;
    margin-bottom: 1rem;
  }
  
  /* Exclude ActivityFeed timestamps from document-content p styles - they have their own size */
  .document-content .space-y-4 p.text-xs[class*="text-[color:var(--color-fg-muted)]"],
  .document-content .space-y-4 p[class*="text-[10px]"][class*="text-[color:var(--color-fg-muted)]"] {
    font-size: 0.75rem !important; /* text-xs = 12px */
    color: var(--color-fg-muted) !important;
    margin-bottom: 0 !important;
  }
  
  /* Exclude components in .preview from document-content typography inheritance */
  /* Components use their own DS tokens - prevent all inheritance */
  .document-content .preview,
  .document-content .preview * {
    font-family: ui-sans-serif, system-ui, sans-serif !important;
  }
  
  /* Ensure Tailwind text size classes work in preview */
  .document-content .preview .text-xs {
    font-size: 0.75rem !important; /* 12px */
  }
  
  .document-content .preview .text-sm {
    font-size: 0.875rem !important; /* 14px */
  }
  
  .document-content .preview .text-md {
    font-size: 1rem !important; /* 16px */
  }
  
  .document-content .preview .text-lg {
    font-size: 1.125rem !important; /* 18px */
  }
  
  .document-content .preview .text-2xl {
    font-size: 1.375rem !important; /* 22px */
  }
  
  /* Ensure Tailwind font weight classes work in preview */
  .document-content .preview .font-normal {
    font-weight: 400 !important;
  }
  
  .document-content .preview .font-medium {
    font-weight: 500 !important;
  }
  
  .document-content .preview .font-semibold {
    font-weight: 600 !important;
  }
  
  /* Intro paragraph - smaller and darker - must come after .document-content p */
  .document-content p.intro-text {
    color: var(--color-fg-base) !important;
    font-size: 15px !important;
    font-weight: 400 !important;
    line-height: 160% !important;
    font-family: Geist, sans-serif !important;
    margin-bottom: 2rem !important; /* Increased spacing below (32px) */
  }
  
  /* Dark mode - darker color for intro text */
  [data-theme="dark"] .document-content p.intro-text {
    color: var(--foreground-secondary) !important; /* Darker in dark mode (#71717A) */
  }
  
  /* Lists in DocumentContent */
  .document-content ul {
    margin-top: 1rem;
    margin-bottom: 1rem;
    padding-left: 1.5rem;
    list-style-type: disc; /* Bullets dla unordered lists */
  }
  
  .document-content ol {
    margin-top: 1rem;
    margin-bottom: 1rem;
    padding-left: 1.5rem;
    list-style-type: decimal; /* Numery dla ordered lists */
  }
  
  .document-content li {
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
    font-size: 15px;
    font-weight: 300;
    color: var(--color-fg-base);
    display: list-item; /* Zapewnia wyświetlanie markerów listy */
  }
  
  .document-content li p {
    color: var(--color-fg-base);
  }
  
  /* Links in DocumentContent */
  .document-content a {
    color: var(--foreground-primary);
    text-decoration: underline;
    text-underline-offset: var(--space-1);
  }
  
  .document-content a:hover {
    opacity: 0.8;
  }
  
  /* Code in DocumentContent */
  .document-content code {
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace;
    font-size: 0.875rem;
    line-height: 1.5;
  }
  
  /* Inline code (not in pre blocks) */
  .document-content :not(pre) > code {
    background-color: color-mix(in srgb, var(--foreground-primary) 5%, transparent);
    padding: 0.125rem 0.375rem;
    margin: 0;
    border-radius: 0.75rem;
    font-size: 0.8125em;
    color: var(--color-fg-base);
    font-weight: 400;
    line-height: 1;
    display: inline-block;
    vertical-align: baseline;
  }
  
  /* Light mode DocumentContent */
  [data-theme="light"] .document-content :not(pre) > code,
  :root:not([data-theme="dark"]) .document-content :not(pre) > code {
    background-color: color-mix(in srgb, var(--foreground-primary) 5%, transparent);
    color: var(--foreground-primary);
  }
  
  /* Dark mode DocumentContent */
  [data-theme="dark"] .document-content :not(pre) > code {
    background-color: color-mix(in srgb, var(--foreground-primary, #FAFAFA) 5%, transparent);
    color: var(--color-fg-base);
  }
  
  /* Spacing adjustments */
  .document-content h1 + p {
    margin-top: 0 !important;
  }
  
  .document-content h2 + p,
  .document-content h3 + p,
  .document-content h4 + p {
    margin-top: 0;
  }
  
  /* rehype-pretty-code styles - matching shadcn/ui appearance */
  /* rehype-pretty-code wraps code in a figure element */
  .document-content [data-rehype-pretty-code-figure] {
    margin: 1rem 0;
    position: relative;
  }
  
  .document-content [data-rehype-pretty-code-figure] pre {
    overflow-x: auto;
    padding: 1rem 1.25rem;
    background-color: var(--color-surface-1);
    border: 1px solid var(--color-border-base);
    border-radius: 0.5rem;
    margin: 0;
    font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, 'Liberation Mono', monospace;
    font-size: 0.875rem;
    line-height: 1.7;
    font-weight: 300 !important;
  }
  
  /* Fallback for pre without figure wrapper */
  .document-content pre {
    overflow-x: auto;
    padding: 1rem 1.25rem;
    background-color: var(--color-surface-1);
    border: 1px solid var(--color-border-base);
    border-radius: 0.5rem;
    margin: 1rem 0;
    font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, 'Liberation Mono', monospace;
    font-size: 0.875rem;
    line-height: 1.7;
    font-weight: 300 !important;
  }
  
  /* rehype-pretty-code code element */
  .document-content [data-rehype-pretty-code-figure] pre code {
    display: grid;
    min-width: 100%;
    background: transparent;
    padding: 0;
    white-space: pre;
    font-weight: 300 !important;
  }
  
  /* Shiki colors for rehype-pretty-code */
  .document-content [data-rehype-pretty-code-figure] code span[style*="--shiki"],
  .document-content pre code span[style*="--shiki"] {
    color: var(--shiki-dark, var(--color-fg-base));
    font-style: var(--shiki-dark-font-style, normal);
  }
  
  /* Light mode rehype-pretty-code */
  [data-theme="light"] .document-content [data-rehype-pretty-code-figure] pre,
  :root:not([data-theme="dark"]) .document-content [data-rehype-pretty-code-figure] pre,
  [data-theme="light"] .document-content pre,
  :root:not([data-theme="dark"]) .document-content pre {
    background-color: var(--color-surface-1);
    border-color: var(--color-border-base);
  }
  
  [data-theme="light"] .document-content [data-rehype-pretty-code-figure] code span[style*="--shiki"],
  :root:not([data-theme="dark"]) .document-content [data-rehype-pretty-code-figure] code span[style*="--shiki"],
  [data-theme="light"] .document-content pre code span[style*="--shiki"],
  :root:not([data-theme="dark"]) .document-content pre code span[style*="--shiki"] {
    color: var(--shiki-light, var(--foreground-primary));
    font-style: var(--shiki-light-font-style, normal);
  }
  
  /* Dark mode rehype-pretty-code */
  [data-theme="dark"] .document-content [data-rehype-pretty-code-figure] pre,
  [data-theme="dark"] .document-content pre {
    background-color: var(--color-surface-1);
    border-color: var(--color-border-base);
  }
  
  [data-theme="dark"] .document-content [data-rehype-pretty-code-figure] code span[style*="--shiki"],
  [data-theme="dark"] .document-content pre code span[style*="--shiki"] {
    color: var(--shiki-dark, var(--color-fg-base));
    font-style: var(--shiki-dark-font-style, normal);
  }
  
  /* Code lines with data-line attribute - minimal default styles */
  .document-content [data-rehype-pretty-code-figure] [data-line] {
    padding: 0 1rem;
  }
  
  .document-content [data-rehype-pretty-code-figure] [data-line]:empty {
    display: none;
  }
  
  .document-content [data-rehype-pretty-code-figure] code [data-line] > span {
    display: inline;
  }
  
  /* Line numbers */
  .document-content [data-rehype-pretty-code-figure] code[data-line-numbers] {
    counter-reset: line;
  }
  
  .document-content [data-rehype-pretty-code-figure] code[data-line-numbers] > [data-line]::before {
    counter-increment: line;
    content: counter(line);
    margin-right: 1rem;
    display: inline-block;
    width: 1rem;
    text-align: right;
    color: var(--color-fg-muted);
  }
  
  /* Highlighted lines */
  .document-content [data-rehype-pretty-code-figure] [data-line][data-highlighted] {
    background-color: rgba(255, 255, 255, 0.05);
    border-left: 1px solid color-mix(in srgb, var(--foreground-primary) 2%, transparent);
    padding-left: calc(1rem - 1px);
    margin-left: -1rem;
    margin-right: -1rem;
    padding-right: 1rem;
  }
  
  [data-theme="light"] .document-content [data-rehype-pretty-code-figure] [data-line][data-highlighted],
  :root:not([data-theme="dark"]) .document-content [data-rehype-pretty-code-figure] [data-line][data-highlighted] {
    background-color: rgba(0, 0, 0, 0.05);
    border-left: 1px solid color-mix(in srgb, var(--foreground-primary) 2%, transparent);
  }
  
  /* Highlighted characters/words */
  .document-content [data-rehype-pretty-code-figure] [data-highlighted-chars] {
    border-radius: 0.25rem;
    background-color: color-mix(in srgb, var(--color-brand-primary) 20%, transparent);
    box-shadow: 0 0 0 var(--space-1) color-mix(in srgb, var(--color-brand-primary) 20%, transparent);
  }
  
  [data-theme="light"] .document-content [data-rehype-pretty-code-figure] [data-highlighted-chars],
  :root:not([data-theme="dark"]) .document-content [data-rehype-pretty-code-figure] [data-highlighted-chars] {
    background-color: color-mix(in srgb, var(--color-brand-primary) 15%, transparent);
    box-shadow: 0 0 0 var(--space-1) color-mix(in srgb, var(--color-brand-primary) 15%, transparent);
  }
  
  .document-content [data-rehype-pretty-code-figure] [data-chars-id] {
    border-bottom: 1px solid color-mix(in srgb, var(--foreground-primary) 2%, transparent);
    padding: 0.25rem 0;
    box-shadow: none;
  }
  
  /* Fallback styles for old structure (without figure wrapper) */
  .document-content pre code span[data-line] {
    padding: 0 1rem;
  }
  
  .document-content pre code span[data-line]:empty {
    display: none;
  }
  
  .document-content pre code span[data-line] > span {
    display: inline;
  }
  
  .document-content pre code {
    white-space: pre;
    font-weight: 300 !important;
  }
  
  .document-content pre code span[data-line][data-highlighted] {
    background-color: rgba(255, 255, 255, 0.05);
    border-left: 1px solid color-mix(in srgb, var(--foreground-primary) 2%, transparent);
    padding-left: calc(1rem - 1px);
    margin-left: -1rem;
    margin-right: -1rem;
    padding-right: 1rem;
  }
  
  [data-theme="light"] .document-content pre code span[data-line][data-highlighted],
  :root:not([data-theme="dark"]) .document-content pre code span[data-line][data-highlighted] {
    background-color: rgba(0, 0, 0, 0.05);
    border-left: 1px solid color-mix(in srgb, var(--foreground-primary) 2%, transparent);
  }
  
  /* CommandItem hover effect - ensure it works even with data-selected */
  /* Use high specificity selectors to override any inline styles or data attributes */
  div[cmdk-item]:hover,
  div[cmdk-item][data-selected="true"]:hover,
  div[cmdk-item][data-selected="false"]:hover,
  div[cmdk-item][aria-selected="true"]:hover,
  div[cmdk-item][aria-selected="false"]:hover,
  [cmdk-item]:hover,
  [cmdk-item][data-selected="true"]:hover,
  [cmdk-item][data-selected="false"]:hover,
  [cmdk-item][aria-selected="true"]:hover,
  [cmdk-item][aria-selected="false"]:hover,
  [role="option"][cmdk-item]:hover,
  [role="option"][cmdk-item][data-selected="true"]:hover,
  [role="option"][cmdk-item][data-selected="false"]:hover {
    background-color: var(--color-surface-2) !important;
    background: var(--color-surface-2) !important;
    color: var(--color-fg-base) !important;
  }
  
  /* CardContent span color override - ensure spans use foreground base color */
  /* Target only spans directly inside value/content divs, exclude badges and explicitly styled elements */
  div.mt-2.mb-1 > div.text-2xl span,
  div[class*="mt-2"][class*="mb-1"] > div[class*="text-2xl"] span {
    color: var(--color-fg-base) !important;
  }
  
  /* Ensure description text (p elements) inside CardContent use muted color */
  div.mt-2.mb-1 > p.text-xs,
  div[class*="mt-2"][class*="mb-1"] > p[class*="text-xs"] {
    color: var(--color-fg-muted) !important;
  }
}

