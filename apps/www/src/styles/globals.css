@import "@fragment_ui/tokens/dist/tokens.css";
@tailwind base;
@tailwind components;
@tailwind utilities;

/* CRITICAL CSS - Prevent FOUC (Flash of Unstyled Content) - must load early */
/* Next.js portal positioning */
nextjs-portal {
  position: absolute !important;
  left: 7.9899px !important;
  top: 7.9899px !important;
}

/* Force admin sidebar to be at left edge immediately - prevent 8px flash */
aside.fixed.left-0,
aside[class*="fixed"][class*="left-0"],
aside.fixed.left-0[class*="z-30"],
aside.fixed[class*="w-64"],
body aside.fixed.left-0,
body aside[class*="fixed"][class*="left-0"],
body aside.fixed[class*="w-64"] {
  left: 0 !important;
  margin-left: 0 !important;
  padding-left: 0 !important;
  transform: translateX(0) !important;
  inset: 0px auto auto 0px !important;
}

/* Sidebar width variables - matching shadcn/ui */
.group\/sidebar-wrapper {
  --sidebar-width: 220px;
}

@media (min-width: 1024px) {
  .group\/sidebar-wrapper {
    --sidebar-width: 240px;
  }
}

/* Import Design System styles - includes DocumentContent typography styles */
@import "@fragment_ui/ui/styles.css";

/* CRITICAL: Override transform from packages/ui/src/styles.css for html and body */
/* The * { transform: translate3d(0, 0, 0); } rule in ui/styles.css applies to all elements */
/* We need to explicitly remove it from html and body to prevent positioning issues */
html {
  transform: none !important;
  -webkit-transform: none !important;
  margin: 0 !important;
  padding: 0 !important;
  position: relative !important;
}

body {
  transform: none !important;
  -webkit-transform: none !important;
  margin: 0 !important;
  padding: 0 !important;
  position: static !important;
}

:root {
  color-scheme: light dark;
}

/* Global font rendering optimization - Chrome specific */
/* Apply to text elements only, not layout elements */
p, span, a, h1, h2, h3, h4, h5, h6, li, td, th, label, button, input, textarea, select, code, pre {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* Chrome: use auto instead of optimizeLegibility to prevent blur */
  text-rendering: auto;
  /* Chrome: prevent subpixel rendering blur */
  -webkit-text-stroke: 0.35px transparent;
  /* Chrome: force hardware acceleration for text only */
  transform: translate3d(0, 0, 0);
  -webkit-transform: translate3d(0, 0, 0);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/* Exclude layout elements from transform to prevent positioning issues */
header, nav, aside, main, section, article, div, body, html {
  /* Only font smoothing, no transform */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: auto;
  -webkit-text-stroke: 0.35px transparent;
}

html,
body {
  height: 100%;
  background: var(--background-primary, var(--color-bg-base));
  color: var(--color-fg-base);
  /* Chrome: Force GPU acceleration */
  will-change: auto;
  /* Hide scrollbars globally */
  scrollbar-width: none !important; /* Firefox */
  -ms-overflow-style: none !important; /* IE and Edge */
}

/* Ensure admin pages have no margins/padding on body/html */
body[class*="admin"] {
  margin: 0 !important;
  padding: 0 !important;
}

/* Ensure Next.js root div has no margins/padding for admin pages */
#__next {
  margin: 0 !important;
  padding: 0 !important;
  margin-top: 0 !important;
  padding-top: 0 !important;
}

/* Hide or reposition Vercel Speed Insights badge if it's causing layout issues */
[data-vercel-speed-insights],
iframe[src*="vercel"],
div[data-vercel-speed-insights],
script[src*="vercel"],
a[href*="vercel"][target="_blank"],
div[class*="vercel"],
div[id*="vercel"] {
  position: fixed !important;
  top: auto !important;
  bottom: 20px !important;
  right: 20px !important;
  left: auto !important;
  z-index: 9999 !important;
  margin: 0 !important;
  padding: 0 !important;
}

/* Reposition Next.js Dev Tools widget to bottom-left */
#devtools-indicator,
.nextjs-toast {
  position: fixed !important;
  bottom: 20px !important;
  left: 20px !important;
  right: auto !important;
  z-index: 9999 !important;
  margin: 0 !important;
  padding: 0 !important;
  pointer-events: auto !important;
}

/* Ensure fixed header is always at the top, regardless of parent container */
header.fixed.top-0 {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  z-index: 50 !important;
  margin: 0 !important;
  padding: 0 !important;
  transform: none !important;
  will-change: auto !important;
}

/* Ensure parent containers don't create stacking context that affects fixed positioning */
div:has(> header.fixed.top-0) {
  transform: none !important;
  perspective: none !important;
  filter: none !important;
  will-change: auto !important;
}

/* Force admin sidebar to be at left edge - override any padding/margin */
body aside.fixed.left-0,
body aside[class*="fixed"][class*="left-0"],
aside.fixed.left-0[class*="z-30"],
body[class*="admin"] aside.fixed,
body aside.fixed[class*="w-64"] {
  left: 0 !important;
  margin-left: 0 !important;
  padding-left: 0 !important;
  transform: translateX(0) !important;
  inset: 0px auto auto 0px !important;
}

/* Ensure admin layout root containers have no padding - but NOT the AppShell content container */
/* Only target the outermost container, not AppShell internal containers */
body > div:first-child:not([class*="pl-"]),
body [class*="admin"] > div:first-child:not([class*="pl-"]) {
  margin-left: 0 !important;
  padding-left: 0 !important;
}

/* Hide scrollbars in Chrome, Safari, Opera */
html::-webkit-scrollbar,
body::-webkit-scrollbar {
  display: none !important;
  width: 0 !important;
  height: 0 !important;
  background: transparent !important;
}

/* Hide scrollbars for all elements */
* {
  scrollbar-width: none !important; /* Firefox */
  -ms-overflow-style: none !important; /* IE and Edge */
}

*::-webkit-scrollbar {
  display: none !important; /* Chrome, Safari, Opera */
  width: 0 !important;
  height: 0 !important;
  background: transparent !important;
}

@layer utilities {
  /* Input text color - override inherited color from body */
  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="number"],
  input[type="search"],
  input[type="tel"],
  input[type="url"],
  input:not([type]) {
    color: var(--color-fg-base) !important;
  }
}

/* Logo theme colors - dark logo for light mode (default) */
.logo-theme {
  filter: brightness(0) invert(0);
}

/* Logo theme colors - light logo for dark mode */
[data-theme="dark"] .logo-theme {
  filter: brightness(0) invert(1);
}

/* Logo theme colors - dark logo for explicit light mode */
[data-theme="light"] .logo-theme {
  filter: brightness(0) invert(0);
}

/* Logo theme colors - light logo for system dark mode (when no explicit theme) */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme="light"]):not([data-theme="dark"]) .logo-theme {
    filter: brightness(0) invert(1);
  }
}

/* Logo theme colors - dark logo for system light mode (when no explicit theme) */
@media (prefers-color-scheme: light) {
  :root:not([data-theme="light"]):not([data-theme="dark"]) .logo-theme {
    filter: brightness(0) invert(0);
  }
}

/* GitHub icon theme colors - automatically adapts to theme via foreground-primary */
.github-icon {
  color: var(--foreground-primary);
}

.github-icon svg {
  fill: currentColor;
}

/* Top navigation spacing tweak: reduce gap between logo and nav links */
nav[aria-label="Main"] {
  margin-left: 0 !important;
}

/* Breadcrumb styles are handled by DS (`@fragment_ui/ui` Breadcrumbs) via tokens. */

/* Override mb-4 for h1 in documentation pages - apply consistent spacing */
h1.text-3xl.mb-4,
h1.text-3xl.mb-6 {
  margin-bottom: 0.5rem !important; /* mb-2 equivalent - same as Introduction page */
}

/* Styled intro paragraph for pages without prose (components, blocks) */
main.components-page > h1 + p,
main > h1 + p:not(.prose p) {
  color: var(--color-fg-muted, #71717A) !important;
  font-family: Geist, sans-serif !important;
  font-size: 15px !important; /* Align with intro-text */
  font-style: normal !important;
  font-weight: 400 !important;
  line-height: 160% !important;
  margin-top: 0 !important;
  margin-bottom: 2rem !important; /* Match intro-text spacing */
}

/* Ensure h1 with mb-6 has proper spacing on components/blocks pages - match introduction spacing */
main.components-page > h1.mb-6,
main > h1.mb-6:not(.prose h1) {
  margin-bottom: 1.5rem !important; /* 24px - same as mb-6 but ensure it's applied */
}

/* Note: rehype-pretty-code styles moved to DS (.document-content [data-rehype-pretty-code-figure]) */

/* Code blocks in component/block documentation pages */
/* Apply consistent styling to all pre/code blocks in docs */
/* But don't override shiki-generated pre blocks (they have their own styling) */
/* Exclude CodeBlock component (has .not-prose wrapper) */
article pre:not([style*="--shiki"]):not([data-theme]):not(.not-prose pre),
.DocLayout pre:not([style*="--shiki"]):not([data-theme]):not(.not-prose pre),
main pre:not([style*="--shiki"]):not([data-theme]):not(.not-prose pre),
article .not-prose ~ pre:not([style*="--shiki"]):not([data-theme]),
.DocLayout .not-prose ~ pre:not([style*="--shiki"]):not([data-theme]),
main .not-prose ~ pre:not([style*="--shiki"]):not([data-theme]) {
  background-color: var(--color-surface-1, var(--background-secondary)) !important;
  padding: 1rem 1.25rem !important;
  border-radius: 0.5rem !important;
  overflow-x: auto !important;
  margin-top: 1rem !important;
  margin-bottom: 1rem !important;
  border: 1px solid color-mix(in oklab, var(--foreground-primary) 2%, transparent) !important;
  font-size: 0.875rem !important;
  line-height: 1.5 !important;
  font-weight: 300 !important;
  font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace !important;
  display: block !important;
  width: 100% !important;
}

/* Exclude CodeBlock from article pre styles - CodeBlock has .not-prose wrapper */
/* CodeBlock handles its own styling via inline styles and DS styles.css */
/* We don't need to reset here - DS styles.css has higher specificity */

/* Shiki-generated pre blocks - ensure they have proper styling */
/* Shiki generates pre with data-theme attribute and inline styles, so we need high specificity */
article pre[data-theme],
.DocLayout pre[data-theme],
main pre[data-theme],
div pre[data-theme] {
  background-color: var(--color-surface-1, var(--background-secondary)) !important;
  border: 1px solid color-mix(in oklab, var(--foreground-primary) 2%, transparent) !important;
  border-radius: 0.5rem !important;
  padding: 1rem 1.25rem !important;
  margin-top: 1rem !important;
  margin-bottom: 1rem !important;
  overflow-x: auto !important;
  font-weight: 300 !important;
}

/* Exclude CodeBlock from Shiki styles - CodeBlock has .not-prose wrapper */
/* CodeBlock handles its own styling via inline styles and DS styles.css */

/* Override any inline padding styles from shiki - match the padding from regular pre blocks */
article pre[data-theme][style*="padding"],
.DocLayout pre[data-theme][style*="padding"],
main pre[data-theme][style*="padding"],
div pre[data-theme][style*="padding"] {
  padding: 1rem 1.25rem !important;
}

/* Exclude CodeBlock from Shiki padding override - CodeBlock has .not-prose wrapper */
article .not-prose pre[data-theme][style*="padding"],
.DocLayout .not-prose pre[data-theme][style*="padding"],
main .not-prose pre[data-theme][style*="padding"],
div .not-prose pre[data-theme][style*="padding"] {
  padding: unset !important;
}

/* Shiki-generated code inside pre - ensure proper padding */
article pre[data-theme] code,
.DocLayout pre[data-theme] code,
main pre[data-theme] code,
div pre[data-theme] code {
  padding: 0 !important;
  display: block !important;
}

/* Exclude CodeBlock from Shiki code styles - CodeBlock has .not-prose wrapper */
article .not-prose pre[data-theme] code,
.DocLayout .not-prose pre[data-theme] code,
main .not-prose pre[data-theme] code,
div .not-prose pre[data-theme] code {
  padding: unset !important;
  display: unset !important;
}

/* Code inside pre blocks in component/block docs */
article pre code,
.DocLayout pre code,
main pre code {
  background: transparent !important;
  padding: 0 !important;
  border-radius: 0 !important;
  color: var(--color-fg-base, #EDEDF0) !important;
  font-family: inherit !important;
  font-size: inherit !important;
  line-height: inherit !important;
  font-weight: 300 !important;
  display: block !important;
  width: 100% !important;
}

/* Exclude CodeBlock from article pre code styles - CodeBlock has .not-prose wrapper */
/* CodeBlock handles its own styling via inline styles and DS styles.css */

/* Light mode code blocks in component/block docs */
[data-theme="light"] article pre,
:root:not([data-theme="dark"]) article pre,
[data-theme="light"] .DocLayout pre,
:root:not([data-theme="dark"]) .DocLayout pre,
[data-theme="light"] main pre,
:root:not([data-theme="dark"]) main pre {
  background-color: var(--color-surface-1, #f4f4f5) !important;
  border-color: color-mix(in oklab, var(--foreground-primary) 2%, transparent) !important;
}

[data-theme="light"] article pre code,
:root:not([data-theme="dark"]) article pre code,
[data-theme="light"] .DocLayout pre code,
:root:not([data-theme="dark"]) .DocLayout pre code,
[data-theme="light"] main pre code,
:root:not([data-theme="dark"]) main pre code {
  color: var(--foreground-primary, #0a0a0a) !important;
}

/* Dark mode code blocks in component/block docs */
[data-theme="dark"] article pre,
[data-theme="dark"] .DocLayout pre,
[data-theme="dark"] main pre {
  background-color: var(--color-surface-1, #18181b) !important;
  border-color: color-mix(in oklab, var(--foreground-primary) 2%, transparent) !important;
}

[data-theme="dark"] article pre code,
[data-theme="dark"] .DocLayout pre code,
[data-theme="dark"] main pre code {
  color: var(--color-fg-base, #EDEDF0) !important;
}

/* Exclude CodeBlock from theme-based styles - CodeBlock has .not-prose wrapper */
/* CodeBlock handles its own styling via inline styles and DS styles.css */

/* Note: All typography and rehype-pretty-code styles have been moved to DS (.document-content) */
/* Only portal-specific styles remain below */

/* Global styles for list items - applies everywhere */
li {
  font-weight: 300; /* Light */
  color: var(--color-fg-muted, #D4D4D8);
}

/* Global styles for paragraphs inside list items */
li p {
  color: var(--color-fg-muted, #D4D4D8);
}

/* Global styles for bold text */
strong {
  font-weight: 500; /* Medium */
}

/* List styles moved to DS (.document-content) */

/* Hide scrollbar in sidebar - for all scrollable divs */
aside div[style*="scrollbarWidth"],
aside div.overflow-y-auto,
aside > div {
  scrollbar-width: none !important; /* Firefox */
  -ms-overflow-style: none !important; /* IE and Edge */
}

aside div[style*="scrollbarWidth"]::-webkit-scrollbar,
aside div.overflow-y-auto::-webkit-scrollbar,
aside > div::-webkit-scrollbar {
  display: none !important;
  width: 0 !important;
  height: 0 !important;
  background: transparent !important;
  appearance: none !important;
  -webkit-appearance: none !important;
}

aside div[style*="scrollbarWidth"]::-webkit-scrollbar-track,
aside div.overflow-y-auto::-webkit-scrollbar-track,
aside > div::-webkit-scrollbar-track {
  display: none !important;
  width: 0 !important;
  height: 0 !important;
  background: transparent !important;
}

aside div[style*="scrollbarWidth"]::-webkit-scrollbar-thumb,
aside div.overflow-y-auto::-webkit-scrollbar-thumb,
aside > div::-webkit-scrollbar-thumb {
  display: none !important;
  width: 0 !important;
  height: 0 !important;
  background: transparent !important;
}

aside div[style*="scrollbarWidth"]::-webkit-scrollbar-corner,
aside div.overflow-y-auto::-webkit-scrollbar-corner,
aside > div::-webkit-scrollbar-corner {
  display: none !important;
  background: transparent !important;
}

/* Hide scrollbar for ALL elements in sidebar */
aside,
aside * {
  scrollbar-width: none !important; /* Firefox */
  -ms-overflow-style: none !important; /* IE and Edge */
}

aside::-webkit-scrollbar,
aside *::-webkit-scrollbar {
  display: none !important;
  width: 0 !important;
  height: 0 !important;
  background: transparent !important;
  appearance: none !important;
  -webkit-appearance: none !important;
}

aside::-webkit-scrollbar-track,
aside *::-webkit-scrollbar-track {
  display: none !important;
  width: 0 !important;
  height: 0 !important;
  background: transparent !important;
}

aside::-webkit-scrollbar-thumb,
aside *::-webkit-scrollbar-thumb {
  display: none !important;
  width: 0 !important;
  height: 0 !important;
  background: transparent !important;
}

aside::-webkit-scrollbar-corner,
aside *::-webkit-scrollbar-corner {
  display: none !important;
  background: transparent !important;
}

/* Sidebar positioning - desktop offsets */
@media (min-width: 1024px) {
  /* Only apply to documentation sidebars, not AppShell sidebars */
  aside.fixed.left-0:not([data-cursor-element-id]) {
    left: 8px !important;
  }
  
  aside.fixed.right-0:not([data-cursor-element-id]) {
    right: 8px !important;
  }
  
  /* Override for AppShell sidebars - ensure they stick to edge */
  aside.fixed.left-0[data-cursor-element-id] {
    left: 0 !important;
  }
}

/* Logo positioning in top navigation - desktop offset */
@media (min-width: 1024px) {
  header nav a[href="/"],
  header nav a[href="/docs/introduction"],
  header > div > div > a[href="/"],
  header > div > div > a[href="/docs/introduction"] {
    margin-left: 4px !important;
  }
}

/* Ensure logo is visible in mobile */
header > div > div > a[href="/"],
header > div > div > a[href="/docs/introduction"] {
  display: flex !important;
  visibility: visible !important;
  opacity: 1 !important;
}

/* Ensure logo image has dimensions in mobile */
header > div > div > a[href="/"] img,
header > div > div > a[href="/docs/introduction"] img {
  width: 24px !important;
  height: 24px !important;
  min-width: 24px !important;
  min-height: 24px !important;
  display: block !important;
}

/* Table of Contents - remove all background effects */
/* Only apply to right sidebar TOC, not left navigation sidebar */
/* TOC: aside (right, last child) > nav.sticky > a */
/* Left nav: aside (left, first child) > nav.sticky > a (NavItem handles its own hover) */
/* Target only right sidebar (last aside) */
aside:last-child nav[class*="sticky"] a,
aside:last-child nav[class*="sticky"] a:focus,
aside:last-child nav[class*="sticky"] a:active,
aside:last-child nav[class*="sticky"] a:visited,
aside:last-child nav[class*="sticky"] a:hover {
  background-color: transparent !important;
  outline: none !important;
}

/* Note: h2 styles moved to DS (.document-content h2) */

/* Doc heading row â€“ make room for inline pager/actions on the right */
.document-content > .flex.items-center.gap-4.mb-1 {
  justify-content: space-between;
  flex-wrap: wrap;
  width: 100%;
  gap: 0.75rem;
}

/* Components pages: reduce spacing between headline row and intro-text */
.document-content > .flex.items-center.gap-4.mb-1 {
  margin-bottom: var(--space-2, 8px) !important;
}

.document-content > .flex.items-center.gap-4.mb-1 h1 {
  margin-bottom: 0 !important;
}

/* Inline code styling inside documentation content (only non-pre) */
.document-content :not(pre) > code {
  display: inline-block !important;
  vertical-align: baseline !important;
  padding: 0.125rem 0.375rem !important;
  margin: 0 !important;
  border-radius: 0.75rem !important;
  background: var(--color-surface-2) !important;
  color: var(--color-fg-base) !important;
  font-size: 0.8125em !important;
  font-family: var(--font-mono, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace) !important;
  font-weight: 400 !important;
  line-height: 1 !important;
  border: none !important;
}

/* Code elements in API Reference tables */
.document-content table code,
.document-content table td code,
.document-content table th code {
  display: inline-block !important;
  vertical-align: baseline !important;
  padding: 0.125rem 0.375rem !important;
  margin: 0 !important;
  border-radius: 0.75rem !important;
  background: var(--color-surface-2) !important;
  color: var(--color-fg-base) !important;
  font-size: 0.8125em !important;
  font-family: var(--font-mono, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace) !important;
  font-weight: 400 !important;
  line-height: 1 !important;
  border: none !important;
}

/* Let code blocks stay unboxed */
.document-content pre code {
  background: transparent;
  border: none;
  padding: 0;
  font-size: inherit;
}

/* Rehype pretty-code: render single-line plaintext blocks like inline code (e.g., filenames) */
.document-content [data-rehype-pretty-code-figure][data-language="plaintext"] pre {
  background: transparent;
  padding: 0 !important;
  margin: 0 !important;
  border: none !important;
}
.document-content [data-rehype-pretty-code-figure][data-language="plaintext"] code,
.document-content [data-rehype-pretty-code-figure][data-language="plaintext"] code * {
  display: inline-block !important;
  vertical-align: baseline !important;
  padding: 0.125rem 0.375rem !important;
  margin: 0 !important;
  border-radius: 0.75rem !important;
  background: var(--color-surface-2) !important;
  color: var(--color-fg-base) !important;
  font-size: 0.8125em !important;
  font-family: var(--font-mono, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace) !important;
  font-weight: 400 !important;
  line-height: 1 !important;
  box-shadow: none !important;
  border: none !important;
}

/* Fallback: any rehype plaintext code with data-theme */
code[data-language="plaintext"][data-theme] {
  background: var(--color-surface-2) !important;
  padding: 0.125rem 0.375rem !important;
  margin: 0 !important;
  border: none !important;
  border-radius: 0.75rem !important;
  color: var(--color-fg-base) !important;
  line-height: 1 !important;
  font-size: 0.8125em !important;
  font-family: var(--font-mono, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace) !important;
  font-weight: 400 !important;
  box-shadow: none !important;
  display: inline-block !important;
  vertical-align: baseline !important;
}


/* Table of Contents - remove focus ring */
/* Only for right sidebar TOC */
aside:last-child nav[class*="sticky"] a:focus-visible {
  outline: none !important;
  box-shadow: none !important;
}

/* Table of Contents colors are handled by DS (`@fragment_ui/ui` TableOfContents) via tokens. */

/* Components page - remove custom right padding */
main.components-page {
  padding-right: 0 !important;
}

/* Override list font size in docs */
.document-content li {
  font-size: 16px !important;
}

/* Reduce padding on screens below 1366px */
@media (max-width: 1365px) {
  /* disabled to avoid breaking responsive charts */
  /* main > div { */
  /*   padding-left: 0 !important; */
  /*   padding-right: 0 !important; */
  /* } */
  /* main.components-page { */
  /*   padding-right: 0 !important; */
  /* } */
}

/* Search input - override focus ring to use Zinc color instead of brand */
div[class*="relative"] input[type="search"]:focus,
div[class*="relative"] input[type="search"]:focus-visible {
  --tw-ring-color: var(--color-border-base) !important;
  box-shadow: 0 0 0 2px var(--color-border-base) !important;
}

/* Hide legacy "Edit this page on GitHub" footer if present */
.document-content div.mt-16.border-t[style*="padding-top"][style*="3rem"] {
  display: none !important;
}

/* Smooth page transitions - prevent layout shift */
main {
  min-height: calc(100vh - 60px);
  transition: opacity 0.3s ease-in-out;
  animation: pageFadeIn 0.4s ease-out;
  animation-fill-mode: forwards;
  /* Ensure crisp rendering - no transform after animation */
  will-change: auto;
}

@keyframes pageFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Prevent layout shift during navigation */
main > div {
  min-height: 400px; /* Minimum height to prevent jump */
  animation: contentFadeIn 0.5s ease-out;
  animation-fill-mode: forwards;
  will-change: auto;
}

@keyframes contentFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Smooth transitions for content area */
article {
  animation: fadeIn 0.4s ease-out;
  animation-fill-mode: forwards;
  will-change: auto;
}

/* Generic fade-in utility */
.fade-in {
  animation: fadeIn 0.4s ease-out;
  animation-fill-mode: forwards;
  will-change: auto;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Delicate fade-in for breadcrumbs */
nav[aria-label="Breadcrumb"] {
  animation: breadcrumbFadeIn 0.3s ease-out;
  animation-fill-mode: forwards;
  will-change: auto;
}

@keyframes breadcrumbFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Delicate fade-in for headings */
h1 {
  animation: headingFadeIn 0.4s ease-out;
  animation-fill-mode: forwards;
  will-change: auto;
}

h2, h3, h4, h5, h6 {
  animation: headingFadeIn 0.35s ease-out;
  animation-fill-mode: forwards;
  will-change: auto;
}

@keyframes headingFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Prevent flash of unstyled content */
aside[class*="sticky"],
nav[class*="sticky"] {
  contain: layout style paint;
  /* Ensure crisp rendering without transform blur */
  image-rendering: -webkit-optimize-contrast;
  image-rendering: crisp-edges;
}

/* Smooth transitions for breadcrumbs */
nav[aria-label="Breadcrumb"] {
  min-height: 24px; /* Prevent height jump */
  transition: opacity 0.15s ease-in-out;
  /* Chrome: prevent blur - no transform on nav to preserve positioning */
  will-change: auto;
}

/* Intro text utility (outside document-content) */
.intro-text {
  color: var(--color-fg-base);
  font-family: var(--typography-font-sans, Geist, ui-sans-serif, system-ui, sans-serif);
  font-size: var(--typography-size-intro, 15px);
  font-weight: var(--typography-weight-regular, 400);
  line-height: var(--typography-line-height-body, 1.6);
  /* Add breathing room from the headline row above (h1 + top actions) */
  margin-top: var(--space-4, 16px);
  /* Chrome: prevent blur */
  transform: translate3d(0, 0, 0);
  -webkit-transform: translate3d(0, 0, 0);
}

/* Chrome-specific optimizations */
@supports (-webkit-appearance: none) {
  /* Chrome/WebKit browsers - text elements only */
  p,
  h1, h2, h3, h4, h5, h6,
  span,
  a,
  li,
  td, th,
  label,
  button,
  code {
    /* Force crisp rendering in Chrome */
    -webkit-font-smoothing: antialiased;
    text-rendering: auto;
    -webkit-text-stroke: 0.35px transparent;
    /* Prevent blur from subpixel rendering - only on text */
    transform: translate3d(0, 0, 0);
    -webkit-transform: translate3d(0, 0, 0);
  }
  
  /* Exclude layout elements */
  header, nav, aside, main, section, article, div, body {
    /* Only font smoothing, no transform */
    -webkit-font-smoothing: antialiased;
    text-rendering: auto;
    -webkit-text-stroke: 0.35px transparent;
  }
  
  /* Chrome: Disable will-change after animations to prevent blur */
  * {
    will-change: auto;
  }
}

/* Smooth transitions for headings */
h1, h2, h3, h4, h5, h6 {
  transition: opacity 0.15s ease-in-out;
  /* Chrome: prevent blur - transform already applied via text element selector */
  will-change: auto;
}

/* Override button solid variant text color for custom background buttons */
button.button-custom-text[data-button-variant="solid"],
button.button-custom-text[data-button-variant="solid"] *,
button.button-custom-text[data-button-variant="solid"] span,
button.button-custom-text[data-button-variant="solid"] svg,
button.button-custom-text[data-button-variant="solid"] svg path {
  color: var(--color-fg-base) !important;
}

/* Add border to secondary buttons */
button.button-custom-text[data-button-variant="solid"] {
  border: 1px solid var(--color-border-base) !important;
}

button.button-custom-text[data-button-variant="solid"]:hover,
button.button-custom-text[data-button-variant="solid"]:hover *,
button.button-custom-text[data-button-variant="solid"]:hover span,
button.button-custom-text[data-button-variant="solid"]:hover svg,
button.button-custom-text[data-button-variant="solid"]:hover svg path {
  color: var(--color-fg-base) !important;
}

/* Override hover background for custom buttons - ensure surface-1 is applied on hover */
button.button-custom-text[data-button-variant="solid"]:hover {
  background-color: var(--color-surface-1) !important;
  opacity: 1 !important; /* Override default solid hover opacity */
  border-color: var(--color-border-base) !important;
}

button.button-custom-text[data-button-variant="solid"]:active {
  background-color: var(--color-surface-1) !important;
  border-color: var(--color-border-base) !important;
}

button.button-custom-text[data-button-variant="solid"]:disabled,
button.button-custom-text[data-button-variant="solid"]:disabled *,
button.button-custom-text[data-button-variant="solid"]:disabled span,
button.button-custom-text[data-button-variant="solid"]:disabled svg,
button.button-custom-text[data-button-variant="solid"]:disabled svg path {
  color: var(--color-fg-base) !important;
}

button.button-custom-text[data-button-variant="solid"]:disabled {
  border-color: var(--color-border-base) !important;
}

/* Remove border from secondary buttons */
button[data-button-variant="secondary"] {
  border: none !important;
}

/* ExampleSection - Ensure CodeBlock fills full height */
.overflow-auto.h-\[360px\] {
  height: 360px !important;
}

.overflow-auto.h-\[360px\] .not-prose,
.overflow-auto.h-\[360px\] .not-prose.h-full,
.overflow-auto.h-\[360px\] .not-prose > div {
  height: 100% !important;
  display: flex !important;
  flex-direction: column !important;
}

.overflow-auto.h-\[360px\] .not-prose pre,
.overflow-auto.h-\[360px\] .not-prose.h-full pre,
.overflow-auto.h-\[360px\] .not-prose > div > pre {
  height: 100% !important;
  max-height: 100% !important;
  display: flex !important;
  flex-direction: column !important;
  overflow: auto !important;
}

.overflow-auto.h-\[360px\] .not-prose pre code,
.overflow-auto.h-\[360px\] .not-prose.h-full pre code,
.overflow-auto.h-\[360px\] .not-prose > div > pre code {
  flex: 1 !important;
  overflow: auto !important;
}


