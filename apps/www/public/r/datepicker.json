{
  "name": "datepicker",
  "type": "registry:component",
  "dependencies": [
    "react",
    "react-dom",
    "@fragment_ui/ui"
  ],
  "files": [
    {
      "path": "components/ui/DatePicker.tsx",
      "content": "\"use client\";\n\nimport * as React from \"react\";\nimport { DayPicker, DayPickerSingleProps, DayPickerRangeProps } from \"react-day-picker\";\nimport { format } from \"date-fns\";\nimport clsx from \"clsx\";\nimport { Button } from \"./button\";\nimport { Input } from \"./input\";\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\";\n\n// CSS is loaded globally via <link> tag, not as ESM import\n// See: https://react-day-picker.js.org/guides/styling\n\nconst Popover = PopoverPrimitive.Root;\nconst PopoverTrigger = PopoverPrimitive.Trigger;\nconst PopoverContent = PopoverPrimitive.Content;\n\nexport interface DatePickerProps extends Omit<DayPickerSingleProps, \"mode\" | \"selected\" | \"onSelect\"> {\n  mode?: \"single\";\n  value?: Date;\n  onChange?: (date: Date | undefined) => void;\n  placeholder?: string;\n  className?: string;\n  disabled?: boolean;\n}\n\nexport interface DateRangePickerProps extends Omit<DayPickerRangeProps, \"mode\" | \"selected\" | \"onSelect\"> {\n  mode: \"range\";\n  value?: { from?: Date; to?: Date };\n  onChange?: (range: { from?: Date; to?: Date } | undefined) => void;\n  placeholder?: string;\n  className?: string;\n  disabled?: boolean;\n}\n\ntype DatePickerComponent = React.ForwardRefExoticComponent<\n  DatePickerProps | DateRangePickerProps\n>;\n\nexport const DatePicker = React.forwardRef<HTMLInputElement, DatePickerProps | DateRangePickerProps>(\n  function DatePicker(\n    {\n      mode = \"single\",\n      value,\n      onChange,\n      placeholder = \"Pick a date\",\n      className,\n      disabled,\n      ...props\n    },\n    ref\n  ) {\n    const [open, setOpen] = React.useState(false);\n    const [selectedDate, setSelectedDate] = React.useState<Date | undefined>(\n      mode === \"single\" ? (value as Date | undefined) : undefined\n    );\n    const [selectedRange, setSelectedRange] = React.useState<\n      { from?: Date; to?: Date } | undefined\n    >(mode === \"range\" ? (value as { from?: Date; to?: Date } | undefined) : undefined);\n\n    const handleDateSelect = React.useCallback(\n      (date: any) => {\n        if (mode === \"single\") {\n          const singleDate = date as Date | undefined;\n          setSelectedDate(singleDate);\n          (onChange as ((date: Date | undefined) => void) | undefined)?.(singleDate);\n          if (singleDate) {\n            setOpen(false);\n          }\n        } else {\n          const range = date as { from?: Date; to?: Date } | undefined;\n          setSelectedRange(range || undefined);\n          (onChange as ((range: { from?: Date; to?: Date } | undefined) => void) | undefined)?.(range || undefined);\n        }\n      },\n      [mode, onChange]\n    );\n\n    const displayValue = React.useMemo(() => {\n      if (mode === \"single\") {\n        return selectedDate ? format(selectedDate, \"PPP\") : \"\";\n      } else {\n        if (!selectedRange?.from) return \"\";\n        if (!selectedRange?.to) {\n          return `${format(selectedRange.from, \"PPP\")} - ...`;\n        }\n        return `${format(selectedRange.from, \"PPP\")} - ${format(selectedRange.to, \"PPP\")}`;\n      }\n    }, [mode, selectedDate, selectedRange]);\n\n    return (\n      <Popover open={open} onOpenChange={setOpen}>\n        <PopoverTrigger asChild disabled={disabled}>\n          <div>\n            <Input\n              ref={ref}\n              readOnly\n              value={displayValue}\n              placeholder={placeholder}\n              className={clsx(\"cursor-pointer\", className)}\n              onClick={disabled ? undefined : () => setOpen(true)}\n              disabled={disabled}\n            />\n          </div>\n        </PopoverTrigger>\n        <PopoverContent\n          className={clsx(\n            \"z-50 w-auto rounded-[var(--radius-lg)] border border-[color:var(--color-fg-muted)] bg-[color:var(--color-surface-1)] p-3 shadow-lg\",\n            className\n          )}\n          align=\"start\"\n        >\n          <DayPicker\n            {...(mode === \"single\"\n              ? {\n                  mode: \"single\" as const,\n                  selected: selectedDate,\n                }\n              : {\n                  mode: \"range\" as const,\n                  selected: selectedRange,\n                })}\n            onSelect={handleDateSelect as any}\n            className=\"rdp\"\n            classNames={{\n              months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n              month: \"space-y-4\",\n              caption: \"flex justify-center pt-1 relative items-center\",\n              caption_label: \"text-sm font-medium\",\n              nav: \"space-x-1 flex items-center\",\n              button_previous: \"absolute left-1\",\n              button_next: \"absolute right-1\",\n              month_grid: \"w-full border-collapse space-y-1\",\n              weekdays: \"flex\",\n              weekday: \"text-[color:var(--color-fg-muted)] text-sm font-normal w-9\",\n              week: \"flex w-full mt-2\",\n              day: \"h-9 w-9 text-sm rounded-md hover:bg-[color:var(--color-surface-2)]\",\n              day_selected: \"bg-brand text-white hover:bg-brand hover:text-white\",\n              day_range_start: \"bg-brand text-white\",\n              day_range_end: \"bg-brand text-white\",\n              day_outside: \"text-[color:var(--color-fg-muted)] opacity-50\",\n              day_disabled: \"opacity-50 cursor-not-allowed\",\n            }}\n            {...(props as any)}\n          />\n        </PopoverContent>\n      </Popover>\n    );\n  }\n) as DatePickerComponent;\n\n"
    }
  ]
}