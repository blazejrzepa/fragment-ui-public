{
  "name": "combobox",
  "type": "registry:component",
  "dependencies": [
    "react",
    "react-dom",
    "@fragment_ui/ui"
  ],
  "files": [
    {
      "path": "components/ui/Combobox.tsx",
      "content": "\"use client\";\n\nimport * as React from \"react\";\nimport { Command as CommandPrimitive } from \"cmdk\";\nimport clsx from \"clsx\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"./popover\";\nimport { Input } from \"./input\";\nimport { Button } from \"./button\";\n\nexport interface ComboboxOption {\n  value: string;\n  label: string;\n  disabled?: boolean;\n}\n\nexport interface ComboboxProps {\n  options: ComboboxOption[];\n  value?: string;\n  onValueChange?: (value: string) => void;\n  placeholder?: string;\n  searchPlaceholder?: string;\n  emptyText?: string;\n  className?: string;\n  disabled?: boolean;\n}\n\nexport const Combobox = React.forwardRef<HTMLButtonElement, ComboboxProps>(\n  function Combobox(\n    {\n      options,\n      value,\n      onValueChange,\n      placeholder = \"Select option...\",\n      searchPlaceholder = \"Search...\",\n      emptyText = \"No results found.\",\n      className,\n      disabled,\n    },\n    ref\n  ) {\n    const [open, setOpen] = React.useState(false);\n    const [search, setSearch] = React.useState(\"\");\n\n    const selectedOption = options.find((opt) => opt.value === value);\n\n    const filteredOptions = React.useMemo(() => {\n      if (!search) return options;\n      return options.filter((option) =>\n        option.label.toLowerCase().includes(search.toLowerCase())\n      );\n    }, [options, search]);\n\n    return (\n      <Popover open={open} onOpenChange={setOpen}>\n        <PopoverTrigger asChild>\n          <Button\n            ref={ref}\n            variant=\"outline\"\n            role=\"combobox\"\n            aria-expanded={open}\n            className={clsx(\"w-full justify-between\", className)}\n            disabled={disabled}\n          >\n            {selectedOption ? selectedOption.label : placeholder}\n            <span className=\"ml-2\">▼</span>\n          </Button>\n        </PopoverTrigger>\n        <PopoverContent className=\"w-full p-0\" align=\"start\">\n          <CommandPrimitive>\n            <div className=\"flex items-center border-b px-3\">\n              <CommandPrimitive.Input\n                placeholder={searchPlaceholder}\n                value={search}\n                onValueChange={setSearch}\n                className=\"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-[color:var(--color-fg-muted)] disabled:cursor-not-allowed disabled:opacity-50\"\n              />\n            </div>\n            <CommandPrimitive.Empty className=\"py-6 text-center text-sm\">\n              {emptyText}\n            </CommandPrimitive.Empty>\n            <CommandPrimitive.Group>\n              <CommandPrimitive.List>\n                {filteredOptions.map((option) => (\n                  <CommandPrimitive.Item\n                    key={option.value}\n                    value={option.value}\n                    disabled={option.disabled}\n                    onSelect={() => {\n                      onValueChange?.(option.value);\n                      setOpen(false);\n                      setSearch(\"\");\n                    }}\n                    className={clsx(\n                      \"relative flex cursor-default select-none items-center rounded-[var(--radius-sm)] px-2 py-1.5 text-sm outline-none aria-selected:bg-[color:var(--color-surface-2)] aria-selected:text-[color:var(--color-fg-base)] data-[disabled]:pointer-events-none data-[disabled]:opacity-50\"\n                    )}\n                  >\n                    {option.label}\n                    {value === option.value && (\n                      <span className=\"ml-auto\">✓</span>\n                    )}\n                  </CommandPrimitive.Item>\n                ))}\n              </CommandPrimitive.List>\n            </CommandPrimitive.Group>\n          </CommandPrimitive>\n        </PopoverContent>\n      </Popover>\n    );\n  }\n);\n\n\n"
    }
  ]
}