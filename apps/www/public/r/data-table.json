{
  "name": "data-table",
  "type": "registry:block",
  "dependencies": [
    "react",
    "react-dom"
  ],
  "files": [
    {
      "path": "components/blocks/data-table.tsx",
      "content": "\"use client\";\n\nimport * as React from \"react\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@fragment_ui/ui\";\nimport { Pagination } from \"@fragment_ui/ui\";\nimport { Input } from \"@fragment_ui/ui\";\nimport { Button } from \"@fragment_ui/ui\";\nimport clsx from \"clsx\";\n\nexport interface DataTableColumn<T> {\n  id: string;\n  header: string;\n  accessor: (row: T) => React.ReactNode;\n  sortable?: boolean;\n}\n\nexport interface DataTableProps<T> {\n  data: T[];\n  columns: DataTableColumn<T>[];\n  pageSize?: number;\n  searchable?: boolean;\n  searchPlaceholder?: string;\n  className?: string;\n  onRowClick?: (row: T) => void;\n}\n\nexport function DataTable<T extends Record<string, any>>({\n  data,\n  columns,\n  pageSize = 10,\n  searchable = true,\n  searchPlaceholder = \"Search...\",\n  className,\n  onRowClick,\n}: DataTableProps<T>) {\n  const [currentPage, setCurrentPage] = React.useState(1);\n  const [search, setSearch] = React.useState(\"\");\n  const [sortColumn, setSortColumn] = React.useState<string | null>(null);\n  const [sortDirection, setSortDirection] = React.useState<\"asc\" | \"desc\">(\n    \"asc\"\n  );\n\n  const filteredData = React.useMemo(() => {\n    let result = [...data];\n\n    // Search filter\n    if (search && searchable) {\n      const searchLower = search.toLowerCase();\n      result = result.filter((row) =>\n        Object.values(row).some((value) =>\n          String(value).toLowerCase().includes(searchLower)\n        )\n      );\n    }\n\n    // Sort\n    if (sortColumn) {\n      const column = columns.find((col) => col.id === sortColumn);\n      if (column?.sortable) {\n        result.sort((a, b) => {\n          const aVal = String(column.accessor(a) || \"\");\n          const bVal = String(column.accessor(b) || \"\");\n          const comparison = aVal.localeCompare(bVal);\n          return sortDirection === \"asc\" ? comparison : -comparison;\n        });\n      }\n    }\n\n    return result;\n  }, [data, search, sortColumn, sortDirection, columns, searchable]);\n\n  const totalPages = Math.ceil(filteredData.length / pageSize);\n  const paginatedData = React.useMemo(() => {\n    const start = (currentPage - 1) * pageSize;\n    const end = start + pageSize;\n    return filteredData.slice(start, end);\n  }, [filteredData, currentPage, pageSize]);\n\n  const handleSort = (columnId: string) => {\n    if (sortColumn === columnId) {\n      setSortDirection(sortDirection === \"asc\" ? \"desc\" : \"asc\");\n    } else {\n      setSortColumn(columnId);\n      setSortDirection(\"asc\");\n    }\n  };\n\n  React.useEffect(() => {\n    setCurrentPage(1);\n  }, [search]);\n\n  return (\n    <div className={clsx(\"space-y-4\", className)}>\n      {searchable && (\n        <div className=\"flex items-center gap-2\">\n          <Input\n            placeholder={searchPlaceholder}\n            value={search}\n            onChange={(e) => setSearch(e.target.value)}\n            className=\"max-w-sm\"\n          />\n          {search && (\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => setSearch(\"\")}\n            >\n              Clear\n            </Button>\n          )}\n        </div>\n      )}\n\n      <div className=\"rounded-[var(--radius-md)] border border-[color:var(--color-fg-muted)]\">\n        <Table>\n          <TableHeader>\n            <TableRow>\n              {columns.map((column) => (\n                <TableHead\n                  key={column.id}\n                  className={clsx(\n                    column.sortable && \"cursor-pointer select-none hover:bg-[color:var(--color-surface-2)]\"\n                  )}\n                  onClick={() => column.sortable && handleSort(column.id)}\n                >\n                  <div className=\"flex items-center gap-2\">\n                    {column.header}\n                    {column.sortable && sortColumn === column.id && (\n                      <span>{sortDirection === \"asc\" ? \"↑\" : \"↓\"}</span>\n                    )}\n                  </div>\n                </TableHead>\n              ))}\n            </TableRow>\n          </TableHeader>\n          <TableBody>\n            {paginatedData.length === 0 ? (\n              <TableRow>\n                <TableCell\n                  colSpan={columns.length}\n                  className=\"text-center text-[color:var(--color-fg-muted)]\"\n                >\n                  No results found\n                </TableCell>\n              </TableRow>\n            ) : (\n              paginatedData.map((row, index) => (\n                <TableRow\n                  key={index}\n                  className={clsx(\n                    onRowClick && \"cursor-pointer hover:bg-[color:var(--color-surface-2)]\"\n                  )}\n                  onClick={() => onRowClick?.(row)}\n                >\n                  {columns.map((column) => (\n                    <TableCell key={column.id}>\n                      {column.accessor(row)}\n                    </TableCell>\n                  ))}\n                </TableRow>\n              ))\n            )}\n          </TableBody>\n        </Table>\n      </div>\n\n      {totalPages > 1 && (\n        <div className=\"flex items-center justify-between\">\n          <div className=\"text-sm text-[color:var(--color-fg-muted)]\">\n            Showing {paginatedData.length > 0 ? (currentPage - 1) * pageSize + 1 : 0} to{\" \"}\n            {Math.min(currentPage * pageSize, filteredData.length)} of{\" \"}\n            {filteredData.length} results\n          </div>\n          <Pagination\n            currentPage={currentPage}\n            totalPages={totalPages}\n            onPageChange={setCurrentPage}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n\n\n"
    }
  ]
}