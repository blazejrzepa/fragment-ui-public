{
  "name": "chart",
  "type": "registry:component",
  "dependencies": [
    "react",
    "react-dom",
    "@fragment_ui/ui"
  ],
  "files": [
    {
      "path": "components/ui/chart.tsx",
      "content": "\"use client\";\n\nimport * as React from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"./card\";\nimport clsx from \"clsx\";\n\nexport interface ChartDataPoint {\n  label: string;\n  value: number;\n  color?: string;\n}\n\nexport interface ChartProps {\n  title?: string;\n  description?: string;\n  data: ChartDataPoint[];\n  type?: \"line\" | \"bar\" | \"area\" | \"pie\" | \"donut\";\n  height?: number;\n  className?: string;\n  showLegend?: boolean;\n  showGrid?: boolean;\n  // For external chart libraries integration\n  renderChart?: (data: ChartDataPoint[], options: ChartOptions) => React.ReactNode;\n}\n\nexport interface ChartOptions {\n  type: ChartProps[\"type\"];\n  height: number;\n  showLegend: boolean;\n  showGrid: boolean;\n  colors?: string[];\n}\n\n/**\n * Chart component - wrapper for chart libraries\n * \n * This component provides a consistent interface for charts while allowing\n * integration with external chart libraries (e.g., recharts, chart.js, victory).\n * \n * If no renderChart function is provided, it renders a simple placeholder.\n * \n * @example\n * ```tsx\n * <Chart\n *   title=\"Revenue\"\n *   data={[\n *     { label: \"Jan\", value: 1000 },\n *     { label: \"Feb\", value: 1500 },\n *   ]}\n *   type=\"line\"\n * />\n * ```\n */\nexport const Chart = React.memo(\n  React.forwardRef<HTMLDivElement, ChartProps>(\n    function Chart(\n      {\n        title,\n        description,\n        data = [],\n        type = \"line\",\n        height = 300,\n        className,\n        showLegend = true,\n        showGrid = true,\n        renderChart,\n      },\n      ref\n    ) {\n      // Ensure data is always an array\n      const safeData = Array.isArray(data) ? data : [];\n      \n      const options: ChartOptions = {\n        type,\n        height,\n        showLegend,\n        showGrid,\n      };\n\n      const renderPlaceholder = () => {\n        if (safeData.length === 0) {\n          return (\n            <div className=\"flex items-center justify-center h-full text-[color:var(--color-fg-muted)]\">\n              No data available\n            </div>\n          );\n        }\n        \n        const maxValue = Math.max(...safeData.map((d) => d.value), 0);\n        const barHeight = height / safeData.length;\n\n        if (type === \"bar\") {\n          return (\n            <div className=\"flex items-end justify-between h-full gap-2\">\n              {safeData.map((point, index) => (\n                <div\n                  key={index}\n                  className=\"flex-1 flex flex-col items-center gap-1\"\n                >\n                  <div\n                    className=\"w-full bg-[color:var(--color-brand-primary)] rounded-t transition-all\"\n                    style={{\n                      height: `${(point.value / maxValue) * 100}%`,\n                      minHeight: point.value > 0 ? \"4px\" : \"0\",\n                    }}\n                  />\n                  <span className=\"text-xs text-[color:var(--color-fg-muted)]\">\n                    {point.label}\n                  </span>\n                </div>\n              ))}\n            </div>\n          );\n        }\n\n        if (type === \"line\" || type === \"area\") {\n          const points = safeData.map((point, index) => ({\n            x: (index / (safeData.length - 1 || 1)) * 100,\n            y: 100 - (point.value / maxValue) * 100,\n            value: point.value,\n            label: point.label,\n          }));\n\n          return (\n            <div className=\"relative h-full\">\n              {showGrid && (\n                <div className=\"absolute inset-0 flex flex-col justify-between\">\n                  {[0, 25, 50, 75, 100].map((y) => (\n                    <div\n                      key={y}\n                      className=\"border-t border-[color:var(--color-border-base)] opacity-30\"\n                    />\n                  ))}\n                </div>\n              )}\n              <svg className=\"w-full h-full\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"none\">\n                {type === \"area\" && (\n                  <polygon\n                    points={`0,100 ${points.map((p) => `${p.x},${p.y}`).join(\" \")} 100,100`}\n                    fill=\"currentColor\"\n                    className=\"text-[color:var(--color-brand-primary)] opacity-20\"\n                  />\n                )}\n                <polyline\n                  points={points.map((p) => `${p.x},${p.y}`).join(\" \")}\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  className=\"text-[color:var(--color-brand-primary)]\"\n                  strokeWidth=\"2\"\n                />\n                {points.map((point, index) => (\n                  <circle\n                    key={index}\n                    cx={point.x}\n                    cy={point.y}\n                    r=\"2\"\n                    fill=\"currentColor\"\n                    className=\"text-[color:var(--color-brand-primary)]\"\n                  />\n                ))}\n              </svg>\n              <div className=\"absolute bottom-0 left-0 right-0 flex justify-between text-xs text-[color:var(--color-fg-muted)]\">\n                {safeData.map((point, index) => (\n                  <span key={index}>{point.label}</span>\n                ))}\n              </div>\n            </div>\n          );\n        }\n\n        // Default: simple list\n        return (\n          <div className=\"space-y-2\">\n            {safeData.map((point, index) => (\n              <div key={index} className=\"flex items-center gap-2\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center justify-between mb-1\">\n                    <span className=\"text-sm text-[color:var(--color-fg-base)]\">\n                      {point.label}\n                    </span>\n                    <span className=\"text-sm font-medium text-[color:var(--color-fg-base)]\">\n                      {point.value}\n                    </span>\n                  </div>\n                  <div className=\"h-2 bg-[color:var(--color-surface-2)] rounded-full overflow-hidden\">\n                    <div\n                      className=\"h-full bg-[color:var(--color-brand-primary)] transition-all\"\n                      style={{\n                        width: `${(point.value / maxValue) * 100}%`,\n                      }}\n                    />\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        );\n      };\n\n      const content = renderChart ? renderChart(safeData, options) : renderPlaceholder();\n\n      if (title || description) {\n        return (\n          <Card ref={ref} className={className}>\n            {(title || description) && (\n              <CardHeader>\n                {title && <CardTitle>{title}</CardTitle>}\n                {description && (\n                  <p className=\"text-sm text-[color:var(--color-fg-muted)]\">\n                    {description}\n                  </p>\n                )}\n              </CardHeader>\n            )}\n            <CardContent>\n              <div style={{ height: `${height}px` }}>{content}</div>\n              {showLegend && safeData.length > 0 && (\n                <div className=\"mt-4 flex flex-wrap gap-4\">\n                  {safeData.map((point, index) => (\n                    <div key={index} className=\"flex items-center gap-2\">\n                      <div\n                        className=\"w-3 h-3 rounded\"\n                        style={{\n                          backgroundColor:\n                            point.color ||\n                            `var(--color-brand-primary)`,\n                        }}\n                      />\n                      <span className=\"text-xs text-[color:var(--color-fg-muted)]\">\n                        {point.label}\n                      </span>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        );\n      }\n\n      return (\n        <div\n          ref={ref}\n          className={clsx(\"relative\", className)}\n          style={{ height: `${height}px` }}\n        >\n          {content}\n        </div>\n      );\n    }\n  )\n);\n\nChart.displayName = \"Chart\";\n\n"
    }
  ]
}