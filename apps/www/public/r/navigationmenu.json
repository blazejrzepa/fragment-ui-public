{
  "name": "navigationmenu",
  "type": "registry:component",
  "dependencies": [
    "react",
    "react-dom",
    "@fragment_ui/ui"
  ],
  "files": [
    {
      "path": "components/ui/NavigationMenu.tsx",
      "content": "\"use client\";\n\nimport * as React from \"react\";\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\";\nimport { ChevronDown } from \"lucide-react\";\nimport clsx from \"clsx\";\n\nconst NavigationMenuContext = React.createContext<{ viewport: boolean }>({\n  viewport: true,\n});\n\nexport interface NavigationMenuProps\n  extends React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root> {\n  /**\n   * Variant of the navigation menu\n   * @default \"default\"\n   * - \"default\": Standard navigation menu\n   * - \"header\": Header variant with backdrop blur and fixed positioning\n   */\n  variant?: \"default\" | \"header\";\n  /**\n   * Enable backdrop blur effect (only applies when variant=\"header\")\n   * @default false\n   */\n  blur?: boolean;\n  /**\n   * Height of the header (only applies when variant=\"header\")\n   * @default \"60px\"\n   */\n  height?: string;\n  /**\n   * Maximum width of the container (only applies when variant=\"header\")\n   * @default \"1536px\"\n   */\n  maxWidth?: string;\n  /**\n   * Whether to render the Radix viewport (set false to align content under triggers like shadcn)\n   * @default true\n   */\n  viewport?: boolean;\n}\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  NavigationMenuProps\n>(({ className, children, variant = \"default\", blur = false, height = \"60px\", maxWidth = \"1536px\", viewport = true, ...props }, ref) => {\n  // Header variant with backdrop blur and fixed positioning\n  if (variant === \"header\") {\n    return (\n      <header\n        className={clsx(\"fixed top-0 left-0 right-0 z-50\", className)}\n        style={{\n          height,\n          backgroundColor: blur\n            ? \"color-mix(in oklab, var(--background-primary) 60%, transparent)\"\n            : \"var(--background-primary)\",\n          backdropFilter: blur ? \"blur(12px)\" : \"none\",\n          WebkitBackdropFilter: blur ? \"blur(12px)\" : \"none\",\n        }}\n      >\n        <NavigationMenuContext.Provider value={{ viewport }}>\n          <div className=\"mx-auto\" style={{ maxWidth }}>\n            <NavigationMenuPrimitive.Root\n              ref={ref}\n              className={clsx(\n                \"relative z-10 flex max-w-max flex-1 items-center justify-start\",\n                className\n              )}\n              {...props}\n            >\n              {children}\n              {viewport !== false && <NavigationMenuViewport />}\n            </NavigationMenuPrimitive.Root>\n          </div>\n        </NavigationMenuContext.Provider>\n      </header>\n    );\n  }\n\n  // Default variant\n  return (\n    <NavigationMenuContext.Provider value={{ viewport }}>\n      <NavigationMenuPrimitive.Root\n        ref={ref}\n        className={clsx(\n          \"relative z-10 flex max-w-max flex-1 items-center justify-start\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n        {viewport !== false && <NavigationMenuViewport />}\n      </NavigationMenuPrimitive.Root>\n    </NavigationMenuContext.Provider>\n  );\n});\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName;\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={clsx(\n      \"group flex flex-1 list-none items-center justify-center space-x-2 [&>li]:list-none [&>li::marker]:hidden [&>li::marker]:content-none pl-0\",\n      className\n    )}\n    style={{ listStyle: \"none\" }}\n    {...props}\n  />\n));\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName;\n\nconst NavigationMenuItem = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Item\n    ref={ref}\n    className={clsx(\n      \"relative list-none [&::marker]:hidden [&::marker]:content-none\",\n      className\n    )}\n    style={{ listStyle: \"none\", display: \"list-item\" }}\n    {...props}\n  />\n));\nNavigationMenuItem.displayName = NavigationMenuPrimitive.Item.displayName;\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, style, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={clsx(\n      \"group inline-flex h-auto w-max items-center justify-center rounded-md bg-transparent px-2.5 py-1.5 text-sm font-medium transition-colors hover:bg-[color:var(--color-surface-1)] focus:bg-[color:var(--color-surface-1)] focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-[color:var(--color-surface-1)] data-[state=open]:bg-[color:var(--color-surface-1)] text-[color:color-mix(in_oklab,var(--color-fg-base)_90%,transparent)] no-underline\",\n      className\n    )}\n    style={{\n      textDecoration: \"none\",\n      ...style,\n    }}\n    {...props}\n  >\n    {children}\n    <ChevronDown className=\"relative top-[1px] ml-1 h-3 w-3 transition-transform duration-300 group-data-[state=open]:rotate-180\" />\n  </NavigationMenuPrimitive.Trigger>\n));\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName;\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => {\n  const { viewport } = React.useContext(NavigationMenuContext);\n\n  const viewportEnabledClasses =\n    \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto\";\n\n  const inlineContentClasses =\n    \"absolute left-0 top-full z-[100] w-full p-1.5 md:p-1.5 mt-1.5 overflow-hidden rounded-[var(--radius-md)] border border-[color:var(--color-border-base)] bg-[color:var(--color-surface-1)] text-[color:var(--color-fg-base)] shadow-lg duration-200 data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:w-auto\";\n\n  return (\n    <NavigationMenuPrimitive.Content\n      ref={ref}\n      className={clsx(\n        viewport ? viewportEnabledClasses : inlineContentClasses,\n        className\n      )}\n      {...props}\n    />\n  );\n});\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName;\n\ntype NavigationMenuLinkVariant = \"pill\" | \"unstyled\";\n\nconst NavigationMenuLink = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Link>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Link> & {\n    /**\n     * Visual style preset for the link.\n     * - pill: default top-nav style (padding + hover/focus background)\n     * - unstyled: minimal (no padding/hover bg) so consumers can fully control layout (e.g. “tile” links)\n     */\n    variant?: NavigationMenuLinkVariant;\n  }\n>(({ className, style, variant = \"pill\", ...props }, ref) => {\n  const disabled = \"disabled:pointer-events-none disabled:opacity-50\";\n  const text = \"text-[color:color-mix(in_oklab,var(--color-fg-base)_90%,transparent)]\";\n\n  const pill =\n    \"group inline-flex h-auto w-max items-center justify-center rounded-md bg-transparent px-2.5 py-1.5 text-sm font-medium transition-colors hover:bg-[color:var(--color-surface-1)] focus:bg-[color:var(--color-surface-1)] focus:outline-none no-underline\";\n\n  // Minimal: no padding, no hover/focus background, no forced rounding/decoration.\n  // Consumers can fully control layout + interaction styles.\n  const unstyled = \"group\";\n\n  return (\n  <NavigationMenuPrimitive.Link\n    ref={ref}\n      className={clsx(text, disabled, variant === \"pill\" ? pill : unstyled, className)}\n    style={{\n      textDecoration: \"none\",\n      ...style,\n    }}\n    {...props}\n  />\n  );\n});\nNavigationMenuLink.displayName = NavigationMenuPrimitive.Link.displayName;\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => {\n  const wrapperRef = React.useRef<HTMLDivElement>(null);\n\n  React.useEffect(() => {\n    const updatePosition = () => {\n      if (!wrapperRef.current) return;\n      \n      const wrapper = wrapperRef.current;\n      const nav = wrapper.closest('[data-radix-navigation-menu-root]') as HTMLElement;\n      if (!nav) return;\n\n      // Find the active trigger (the one with data-state=\"open\")\n      const activeTrigger = nav.querySelector('[data-radix-navigation-menu-trigger][data-state=\"open\"]') as HTMLElement;\n      if (!activeTrigger) {\n        // If no active trigger, position at left edge\n        wrapper.style.setProperty(\"left\", \"0\", \"important\");\n        wrapper.style.setProperty(\"transform\", \"translateX(0)\", \"important\");\n        return;\n      }\n\n      // Use the inner relative container (Radix wraps the list in a relative div)\n      const siblingRelative = wrapper.previousElementSibling as HTMLElement | null;\n      const relativeContainer =\n        (siblingRelative && getComputedStyle(siblingRelative).position === \"relative\"\n          ? siblingRelative\n          : (nav.querySelector('div[style*=\"position:relative\"]') as HTMLElement | null)) || nav;\n\n      const containerRect = relativeContainer.getBoundingClientRect();\n      const triggerRect = activeTrigger.getBoundingClientRect();\n      \n      // Calculate left offset relative to the relative container\n      const leftOffset = triggerRect.left - containerRect.left;\n      \n      // Position wrapper at trigger's left edge\n      wrapper.style.setProperty(\"left\", `${leftOffset}px`, \"important\");\n      wrapper.style.setProperty(\"transform\", \"translateX(0)\", \"important\");\n      wrapper.style.setProperty(\"justify-content\", \"flex-start\", \"important\");\n    };\n\n    // Initial positioning with delay to ensure DOM is ready\n    const timeoutId = setTimeout(updatePosition, 0);\n\n    // Update on resize and scroll\n    window.addEventListener(\"resize\", updatePosition);\n    window.addEventListener(\"scroll\", updatePosition, true);\n    \n    // Use MutationObserver to watch for state changes\n    const nav = wrapperRef.current?.closest('[data-radix-navigation-menu-root]');\n    if (nav) {\n      const observer = new MutationObserver(() => {\n        // Small delay to ensure Radix UI has finished updating\n        setTimeout(updatePosition, 10);\n      });\n      observer.observe(nav, {\n        attributes: true,\n        attributeFilter: [\"data-state\"],\n        subtree: true,\n      });\n\n      return () => {\n        clearTimeout(timeoutId);\n        window.removeEventListener(\"resize\", updatePosition);\n        window.removeEventListener(\"scroll\", updatePosition, true);\n        observer.disconnect();\n      };\n    }\n\n    return () => {\n      clearTimeout(timeoutId);\n      window.removeEventListener(\"resize\", updatePosition);\n      window.removeEventListener(\"scroll\", updatePosition, true);\n    };\n  }, []);\n\n  return (\n    <div \n      ref={wrapperRef}\n      className={clsx(\"absolute left-0 top-full flex justify-start z-[100]\")} \n      style={{ \n        transform: \"translateX(0)\", \n        left: 0,\n        justifyContent: \"flex-start\",\n        zIndex: 100\n      }}\n    >\n      <NavigationMenuPrimitive.Viewport\n        className={clsx(\n          \"origin-top-left relative mt-0.5 h-[var(--radix-navigation-menu-viewport-height)] w-[var(--radix-navigation-menu-viewport-width)] max-w-full overflow-hidden rounded-[var(--radius-md)] border border-[color:var(--color-border-base)] bg-[color:var(--color-surface-1)] text-[color:var(--color-fg-base)] shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 z-[100]\",\n          className\n        )}\n        style={{ zIndex: 100 }}\n        ref={ref}\n        {...props}\n      />\n    </div>\n  );\n});\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName;\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={clsx(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-[color:var(--color-surface-1)] shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n));\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName;\n\nexport {\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n};\n\n\n"
    }
  ]
}