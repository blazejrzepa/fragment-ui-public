{
  "name": "authentication-block",
  "type": "registry:block",
  "dependencies": [
    "react",
    "react-dom"
  ],
  "files": [
    {
      "path": "components/blocks/authentication-block.tsx",
      "content": "\"use client\";\n\nimport * as React from \"react\";\nimport {\n  Button,\n  Input,\n  FormFieldInput,\n  Separator,\n  Card,\n  CardHeader,\n  CardTitle,\n  CardDescription,\n  CardContent,\n} from \"@fragment_ui/ui\";\nimport clsx from \"clsx\";\n\nexport type AuthMode = \"login\" | \"signup\" | \"reset\";\n\nexport interface SocialLoginProvider {\n  name: string;\n  icon?: React.ReactNode;\n  onClick: () => void;\n}\n\nexport interface AuthenticationBlockProps {\n  mode?: AuthMode;\n  onModeChange?: (mode: AuthMode) => void;\n  onSubmit?: (data: {\n    email: string;\n    password?: string;\n    name?: string;\n    confirmPassword?: string;\n  }) => void | Promise<void>;\n  onSocialLogin?: (provider: string) => void | Promise<void>;\n  socialProviders?: SocialLoginProvider[];\n  showSocialLogin?: boolean;\n  title?: string;\n  description?: string;\n  className?: string;\n  error?: string;\n  loading?: boolean;\n}\n\nexport function AuthenticationBlock({\n  mode = \"login\",\n  onModeChange,\n  onSubmit,\n  onSocialLogin,\n  socialProviders = [\n    { name: \"Google\", onClick: () => console.log(\"Google login\") },\n    { name: \"GitHub\", onClick: () => console.log(\"GitHub login\") },\n  ],\n  showSocialLogin = true,\n  title,\n  description,\n  className,\n  error,\n  loading = false,\n}: AuthenticationBlockProps) {\n  const [formData, setFormData] = React.useState({\n    email: \"\",\n    password: \"\",\n    name: \"\",\n    confirmPassword: \"\",\n  });\n  const [formErrors, setFormErrors] = React.useState<Record<string, string>>({});\n  const [isSubmitting, setIsSubmitting] = React.useState(false);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsSubmitting(true);\n    setFormErrors({});\n\n    // Validation\n    const errors: Record<string, string> = {};\n    \n    if (!formData.email) {\n      errors.email = \"Email is required\";\n    } else if (!/\\S+@\\S+\\.\\S+/.test(formData.email)) {\n      errors.email = \"Email is invalid\";\n    }\n\n    if (mode === \"login\" || mode === \"signup\") {\n      if (!formData.password) {\n        errors.password = \"Password is required\";\n      } else if (mode === \"signup\" && formData.password.length < 8) {\n        errors.password = \"Password must be at least 8 characters\";\n      }\n    }\n\n    if (mode === \"signup\") {\n      if (!formData.name) {\n        errors.name = \"Name is required\";\n      }\n      if (formData.password !== formData.confirmPassword) {\n        errors.confirmPassword = \"Passwords do not match\";\n      }\n    }\n\n    if (Object.keys(errors).length > 0) {\n      setFormErrors(errors);\n      setIsSubmitting(false);\n      return;\n    }\n\n    try {\n      if (onSubmit) {\n        await onSubmit({\n          email: formData.email,\n          password: mode !== \"reset\" ? formData.password : undefined,\n          name: mode === \"signup\" ? formData.name : undefined,\n          confirmPassword: mode === \"signup\" ? formData.confirmPassword : undefined,\n        });\n      }\n    } catch (err) {\n      // Error handling is done by parent component via error prop\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleSocialLogin = async (provider: SocialLoginProvider) => {\n    if (onSocialLogin) {\n      await onSocialLogin(provider.name);\n    } else {\n      provider.onClick();\n    }\n  };\n\n  const getTitle = () => {\n    if (title) return title;\n    switch (mode) {\n      case \"login\":\n        return \"Sign in to your account\";\n      case \"signup\":\n        return \"Create an account\";\n      case \"reset\":\n        return \"Reset your password\";\n    }\n  };\n\n  const getDescription = () => {\n    if (description) return description;\n    switch (mode) {\n      case \"login\":\n        return \"Enter your email and password to sign in\";\n      case \"signup\":\n        return \"Enter your information to create an account\";\n      case \"reset\":\n        return \"Enter your email address and we'll send you a reset link\";\n    }\n  };\n\n  const displayTitle = getTitle();\n  const displayDescription = getDescription();\n\n  return (\n    <div className={clsx(\"w-full max-w-md mx-auto\", className)}>\n      <Card>\n        <CardHeader>\n          <CardTitle>{displayTitle}</CardTitle>\n          {displayDescription && <CardDescription>{displayDescription}</CardDescription>}\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            {error && (\n              <div className=\"p-3 rounded-md bg-[color:var(--color-accent-red)]/10 border border-[color:var(--color-accent-red)]/20 text-sm text-[color:var(--color-accent-red)]\">\n                {error}\n              </div>\n            )}\n\n            {mode === \"signup\" && (\n              <FormFieldInput\n                label=\"Name\"\n                value={formData.name}\n                onChange={(e) =>\n                  setFormData({ ...formData, name: e.target.value })\n                }\n                error={formErrors.name}\n                required\n                placeholder=\"John Doe\"\n                disabled={isSubmitting || loading}\n              />\n            )}\n\n            <FormFieldInput\n              label=\"Email\"\n              type=\"email\"\n              value={formData.email}\n              onChange={(e) =>\n                setFormData({ ...formData, email: e.target.value })\n              }\n              error={formErrors.email}\n              required\n              placeholder=\"your@email.com\"\n              disabled={isSubmitting || loading}\n            />\n\n            {mode !== \"reset\" && (\n              <FormFieldInput\n                label=\"Password\"\n                type=\"password\"\n                value={formData.password}\n                onChange={(e) =>\n                  setFormData({ ...formData, password: e.target.value })\n                }\n                error={formErrors.password}\n                required\n                placeholder=\"••••••••\"\n                disabled={isSubmitting || loading}\n              />\n            )}\n\n            {mode === \"signup\" && (\n              <FormFieldInput\n                label=\"Confirm Password\"\n                type=\"password\"\n                value={formData.confirmPassword}\n                onChange={(e) =>\n                  setFormData({ ...formData, confirmPassword: e.target.value })\n                }\n                error={formErrors.confirmPassword}\n                required\n                placeholder=\"••••••••\"\n                disabled={isSubmitting || loading}\n              />\n            )}\n\n            {mode === \"login\" && (\n              <div className=\"flex items-center justify-between\">\n                <div></div>\n                <button\n                  type=\"button\"\n                  onClick={() => onModeChange?.(\"reset\")}\n                  className=\"text-sm text-[color:var(--color-brand-primary)] hover:underline\"\n                >\n                  Forgot password?\n                </button>\n              </div>\n            )}\n\n            <Button\n              type=\"submit\"\n              variant=\"solid\"\n              size=\"lg\"\n              className=\"w-full\"\n              disabled={isSubmitting || loading}\n            >\n              {isSubmitting || loading\n                ? \"Loading...\"\n                : mode === \"login\"\n                ? \"Sign in\"\n                : mode === \"signup\"\n                ? \"Create account\"\n                : \"Send reset link\"}\n            </Button>\n          </form>\n\n          {showSocialLogin && mode !== \"reset\" && (\n            <>\n              <div className=\"my-6 flex items-center gap-4\">\n                <Separator className=\"flex-1\" />\n                <span className=\"text-sm text-[color:var(--color-fg-muted)]\">\n                  OR\n                </span>\n                <Separator className=\"flex-1\" />\n              </div>\n\n              <div className=\"space-y-2\">\n                {socialProviders.map((provider) => (\n                  <Button\n                    key={provider.name}\n                    type=\"button\"\n                    variant=\"outline\"\n                    size=\"lg\"\n                    className=\"w-full\"\n                    onClick={() => handleSocialLogin(provider)}\n                    disabled={isSubmitting || loading}\n                  >\n                    {provider.icon && <span className=\"mr-2\">{provider.icon}</span>}\n                    Continue with {provider.name}\n                  </Button>\n                ))}\n              </div>\n            </>\n          )}\n\n          <div className=\"mt-6 text-center text-sm text-[color:var(--color-fg-muted)]\">\n            {mode === \"login\" ? (\n              <>\n                Don't have an account?{\" \"}\n                <button\n                  type=\"button\"\n                  onClick={() => onModeChange?.(\"signup\")}\n                  className=\"text-[color:var(--color-brand-primary)] hover:underline font-medium\"\n                >\n                  Sign up\n                </button>\n              </>\n            ) : mode === \"signup\" ? (\n              <>\n                Already have an account?{\" \"}\n                <button\n                  type=\"button\"\n                  onClick={() => onModeChange?.(\"login\")}\n                  className=\"text-[color:var(--color-brand-primary)] hover:underline font-medium\"\n                >\n                  Sign in\n                </button>\n              </>\n            ) : (\n              <>\n                Remember your password?{\" \"}\n                <button\n                  type=\"button\"\n                  onClick={() => onModeChange?.(\"login\")}\n                  className=\"text-[color:var(--color-brand-primary)] hover:underline font-medium\"\n                >\n                  Sign in\n                </button>\n              </>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n\n"
    }
  ]
}