{
  "name": "activity-feed",
  "type": "registry:block",
  "dependencies": [
    "react",
    "react-dom",
    "@fragment_ui/ui"
  ],
  "files": [
    {
      "path": "components/ui/activity-feed.tsx",
      "content": "\"use client\";\n\nimport * as React from \"react\";\nimport { Avatar } from \"./avatar\";\nimport { Badge } from \"./badge\";\nimport clsx from \"clsx\";\n\nexport interface ActivityItem {\n  id: string;\n  type: \"action\" | \"update\" | \"comment\" | \"system\";\n  title: string;\n  description?: string;\n  timestamp: Date | string;\n  user?: {\n    name: string;\n    avatar?: string;\n  };\n  icon?: React.ReactNode;\n  metadata?: Record<string, any>;\n}\n\nexport interface ActivityFeedProps {\n  items: ActivityItem[];\n  maxItems?: number;\n  showTimestamps?: boolean;\n  className?: string;\n}\n\nexport const ActivityFeed = React.memo(\n  React.forwardRef<HTMLDivElement, ActivityFeedProps>(\n    function ActivityFeed(\n      { items = [], maxItems, showTimestamps = true, className },\n      ref\n    ) {\n      // Ensure items is always an array\n      const safeItems = Array.isArray(items) ? items : [];\n      const displayItems = maxItems ? safeItems.slice(0, maxItems) : safeItems;\n\n      const formatTimestamp = (timestamp: Date | string) => {\n        const date = typeof timestamp === \"string\" ? new Date(timestamp) : timestamp;\n        const now = new Date();\n        const diff = now.getTime() - date.getTime();\n        const minutes = Math.floor(diff / 60000);\n        const hours = Math.floor(diff / 3600000);\n        const days = Math.floor(diff / 86400000);\n\n        if (minutes < 1) return \"Just now\";\n        if (minutes < 60) return `${minutes}m ago`;\n        if (hours < 24) return `${hours}h ago`;\n        if (days < 7) return `${days}d ago`;\n        return date.toLocaleDateString();\n      };\n\n      const getTypeColor = (type: ActivityItem[\"type\"]) => {\n        switch (type) {\n          case \"action\":\n            return \"bg-[color:var(--color-brand-primary)]\";\n          case \"update\":\n            return \"bg-[color:var(--color-status-info-base)]\";\n          case \"comment\":\n            return \"bg-[color:var(--color-status-warning-base)]\";\n          case \"system\":\n            return \"bg-[color:var(--color-fg-muted)]\";\n          default:\n            return \"bg-[color:var(--color-fg-muted)]\";\n        }\n      };\n\n      return (\n        <div ref={ref} className={clsx(\"space-y-4\", className)}>\n          {displayItems.map((item) => (\n            <div\n              key={item.id}\n              className=\"flex gap-3 items-start pb-4 border-b border-[color:var(--color-border-base)] last:border-0 last:pb-0\"\n            >\n              {item.user?.avatar ? (\n                <Avatar src={item.user.avatar} alt={item.user.name} />\n              ) : item.icon ? (\n                <div\n                  className={clsx(\n                    \"w-8 h-8 rounded-full flex items-center justify-center text-white text-sm\",\n                    getTypeColor(item.type)\n                  )}\n                >\n                  {item.icon}\n                </div>\n              ) : (\n                <Avatar>\n                  {item.user?.name\n                    ?.split(\" \")\n                    .map((n) => n[0])\n                    .join(\"\")\n                    .toUpperCase() || \"?\"}\n                </Avatar>\n              )}\n              <div className=\"flex-1 min-w-0\">\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <span className=\"font-medium text-[color:var(--color-fg-base)]\">\n                    {item.title}\n                  </span>\n                  <Badge variant=\"outline\" size=\"sm\">\n                    {item.type}\n                  </Badge>\n                </div>\n                {item.description && (\n                  <p className=\"text-sm text-[color:var(--color-fg-muted)] mb-1\">\n                    {item.description}\n                  </p>\n                )}\n                {showTimestamps && (\n                  <p className=\"text-xs text-[color:var(--color-fg-muted)]\">\n                    {formatTimestamp(item.timestamp)}\n                  </p>\n                )}\n              </div>\n            </div>\n          ))}\n        </div>\n      );\n    }\n  )\n);\n\nActivityFeed.displayName = \"ActivityFeed\";\n\n"
    }
  ]
}