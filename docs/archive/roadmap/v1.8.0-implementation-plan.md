# üöÄ v1.8.0 - Szczeg√≥≈Çowy Plan Implementacji

## üìã Scope v1.8.0

### ‚úÖ Zawarto≈õƒá Release:

1. **Nowe Komponenty** (z oryginalnego planu)
2. **Optymalizacje Wydajno≈õci** (z oryginalnego planu)
3. **Component Usage Analytics Dashboard** (NOWE)
4. **Component Migration Assistant** (NOWE)
5. **Design System Governance Dashboard** (NOWE)

---

## üìä Szacowany Czas

| Kategoria | Czas | Priorytet |
|-----------|------|-----------|
| Nowe Komponenty | 14-19h | ‚≠ê‚≠ê‚≠ê |
| Optymalizacje | 12-17h | ‚≠ê‚≠ê‚≠ê |
| Usage Analytics Dashboard | 10-14h | ‚≠ê‚≠ê‚≠ê |
| Migration Assistant | 10-12h | ‚≠ê‚≠ê‚≠ê |
| Governance Dashboard | 12-16h | ‚≠ê‚≠ê‚≠ê |
| **RAZEM** | **58-78h** | |

**Timeline:** 6-8 tygodni (przy 10-15h/tydzie≈Ñ)

---

## üéØ Faza 1: Nowe Komponenty (Tydzie≈Ñ 1-2)

### 1.1 Segmented Control (3-4h)

**Wymagania:**
- iOS-style segmented control
- Single/multiple selection modes
- Keyboard navigation
- Accessible (ARIA)
- Variants: default, outline, filled
- Sizes: sm, md, lg

**Implementacja:**
- Komponent: `packages/ui/src/segmented-control.tsx`
- Storybook: `packages/ui/src/segmented-control.stories.tsx`
- Testy: `packages/ui/src/segmented-control.test.tsx`
- Dokumentacja: `apps/www/app/docs/components/segmented-control/page.tsx`
- Registry: `packages/registry/src/components/segmented-control.json`

**API:**
```typescript
interface SegmentedControlProps {
  options: Array<{ value: string; label: string; icon?: ReactNode }>;
  value?: string | string[];
  onChange?: (value: string | string[]) => void;
  multiple?: boolean;
  variant?: "default" | "outline" | "filled";
  size?: "sm" | "md" | "lg";
  disabled?: boolean;
  className?: string;
}
```

---

### 1.2 Rating Component (2-3h)

**Wymagania:**
- Star rating (1-5 stars)
- Half-star support
- Read-only mode
- Customizable number of stars
- Accessible (ARIA)
- Sizes: sm, md, lg

**Implementacja:**
- Komponent: `packages/ui/src/rating.tsx`
- Storybook: `packages/ui/src/rating.stories.tsx`
- Testy: `packages/ui/src/rating.test.tsx`
- Dokumentacja: `apps/www/app/docs/components/rating/page.tsx`
- Registry: `packages/registry/src/components/rating.json`

**API:**
```typescript
interface RatingProps {
  value?: number;
  onChange?: (value: number) => void;
  max?: number; // default: 5
  half?: boolean; // half-star support
  readOnly?: boolean;
  size?: "sm" | "md" | "lg";
  disabled?: boolean;
  className?: string;
}
```

---

### 1.3 File Upload / Dropzone (4-5h)

**Wymagania:**
- Drag & drop support
- Multiple file selection
- File preview
- Progress indicator
- File validation (type, size)
- Accessible

**Implementacja:**
- Komponent: `packages/ui/src/file-upload.tsx`
- Storybook: `packages/ui/src/file-upload.stories.tsx`
- Testy: `packages/ui/src/file-upload.test.tsx`
- Dokumentacja: `apps/www/app/docs/components/file-upload/page.tsx`
- Registry: `packages/registry/src/components/file-upload.json`

**Zale≈ºno≈õci:**
- `react-dropzone` (lub w≈Çasna implementacja)

**API:**
```typescript
interface FileUploadProps {
  onUpload: (files: File[]) => void | Promise<void>;
  accept?: string | string[]; // MIME types
  multiple?: boolean;
  maxSize?: number; // bytes
  maxFiles?: number;
  disabled?: boolean;
  className?: string;
}
```

---

### 1.4 Split Button (2-3h)

**Wymagania:**
- Primary action button
- Dropdown menu for secondary actions
- Keyboard navigation
- Accessible

**Implementacja:**
- Komponent: `packages/ui/src/split-button.tsx`
- Storybook: `packages/ui/src/split-button.stories.tsx`
- Testy: `packages/ui/src/split-button.test.tsx`
- Dokumentacja: `apps/www/app/docs/components/split-button/page.tsx`
- Registry: `packages/registry/src/components/split-button.json`

**API:**
```typescript
interface SplitButtonProps {
  primaryAction: {
    label: string;
    onClick: () => void;
    icon?: ReactNode;
  };
  secondaryActions: Array<{
    label: string;
    onClick: () => void;
    icon?: ReactNode;
  }>;
  variant?: ButtonVariant;
  size?: ButtonSize;
  disabled?: boolean;
  className?: string;
}
```

---

### 1.5 Tag Input / Chip Input (3-4h)

**Wymagania:**
- Add/remove tags
- Autocomplete suggestions
- Validation
- Keyboard navigation (Enter to add, Backspace to remove)
- Accessible

**Implementacja:**
- Komponent: `packages/ui/src/tag-input.tsx`
- Storybook: `packages/ui/src/tag-input.stories.tsx`
- Testy: `packages/ui/src/tag-input.test.tsx`
- Dokumentacja: `apps/www/app/docs/components/tag-input/page.tsx`
- Registry: `packages/registry/src/components/tag-input.json`

**API:**
```typescript
interface TagInputProps {
  value: string[];
  onChange: (tags: string[]) => void;
  suggestions?: string[];
  maxTags?: number;
  separator?: string; // default: ","
  disabled?: boolean;
  className?: string;
}
```

---

## ‚ö° Faza 2: Optymalizacje Wydajno≈õci (Tydzie≈Ñ 2-3)

### 2.1 React.memo dla Komponent√≥w (4-6h)

**Komponenty do optymalizacji:**
- Button, Input, Textarea, Select, Checkbox, Radio, Switch
- Card, Badge, Avatar, Separator
- Tooltip, Popover, HoverCard
- Tabs, Accordion, Breadcrumbs

**Implementacja:**
- Dodaƒá `React.memo` do komponent√≥w, kt√≥re rzadko siƒô zmieniajƒÖ
- Custom comparison functions dla komponent√≥w z complex props
- Testy wydajno≈õciowe przed/po

**Przyk≈Çad:**
```typescript
export const Button = React.memo(ButtonComponent, (prevProps, nextProps) => {
  return (
    prevProps.variant === nextProps.variant &&
    prevProps.size === nextProps.size &&
    prevProps.disabled === nextProps.disabled &&
    prevProps.children === nextProps.children
  );
});
```

---

### 2.2 useMemo i useCallback (3-4h)

**Komponenty do optymalizacji:**
- DataTable (sorting, filtering calculations)
- VirtualList, VirtualTable (range calculations)
- FormEnhanced (validation logic)
- Multi-Select (filtering logic)
- Combobox (search filtering)

**Implementacja:**
- `useMemo` dla kosztownych oblicze≈Ñ
- `useCallback` dla funkcji przekazywanych jako props
- Profiling przed/po optymalizacji

**Przyk≈Çad:**
```typescript
const filteredOptions = useMemo(() => {
  return options.filter(option => 
    option.label.toLowerCase().includes(searchTerm.toLowerCase())
  );
}, [options, searchTerm]);

const handleSelect = useCallback((value: string) => {
  onChange(value);
}, [onChange]);
```

---

### 2.3 Loading States Consistency (4-5h)

**Komponenty do rozszerzenia:**
- Button (loading state)
- Input (loading state)
- Select (loading options)
- FormField (loading validation)
- DataTable (loading data)

**Implementacja:**
- Spinner component integration
- Skeleton screens dla danych
- Progress indicators
- Consistent loading UI patterns

**Przyk≈Çad:**
```typescript
<Button loading={isSubmitting}>
  Submit
</Button>

<Select loading={isLoadingOptions}>
  {/* options */}
</Select>
```

---

### 2.4 Error States & Validation Feedback (3-4h)

**Komponenty do rozszerzenia:**
- FormField (error messages)
- Input, Textarea, Select (error states)
- FormEnhanced (validation feedback)
- FileUpload (validation errors)

**Implementacja:**
- Error icons
- Error messages styling
- Visual error indicators
- Accessibility (ARIA error attributes)

---

## üìä Faza 3: Component Usage Analytics Dashboard (Tydzie≈Ñ 3-4)

### 3.1 Telemetry Enhancement (4-5h)

**Nowe metryki:**
- Component usage tracking (kt√≥re komponenty sƒÖ u≈ºywane)
- Component version tracking (kt√≥re wersje sƒÖ u≈ºywane)
- Component props tracking (kt√≥re props sƒÖ u≈ºywane)
- Component import tracking (skƒÖd sƒÖ importowane)

**Implementacja:**
- Rozszerzenie `packages/telemetry/src/component-usage.ts`
- Component fingerprinting
- Usage aggregation logic
- Database schema updates

**Database Schema:**
```sql
CREATE TABLE component_usage (
  id INTEGER PRIMARY KEY,
  component_name TEXT NOT NULL,
  version TEXT NOT NULL,
  props_used TEXT, -- JSON array
  import_path TEXT,
  project_id TEXT,
  timestamp DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

---

### 3.2 Analytics API Endpoints (3-4h)

**Endpoints:**
- `GET /api/analytics/components` - Lista komponent√≥w z usage stats
- `GET /api/analytics/components/:name` - Szczeg√≥≈Çy u≈ºycia komponentu
- `GET /api/analytics/heatmap` - Heatmap u≈ºycia komponent√≥w
- `GET /api/analytics/trends` - Trendy u≈ºycia w czasie

**Implementacja:**
- `apps/www/app/api/analytics/components/route.ts`
- `apps/www/app/api/analytics/components/[name]/route.ts`
- `apps/www/app/api/analytics/heatmap/route.ts`
- `apps/www/app/api/analytics/trends/route.ts`

---

### 3.3 Analytics Dashboard UI (3-5h)

**Features:**
- Component usage list z stats
- Heatmap visualization
- Trends charts
- Component details view
- Filters (date range, project, version)

**Implementacja:**
- `apps/www/app/tools/analytics/page.tsx`
- Components:
  - `ComponentUsageList`
  - `UsageHeatmap`
  - `UsageTrends`
  - `ComponentDetails`

**UI Components:**
- Recharts dla charts
- Heatmap visualization
- Data tables z sorting/filtering

---

## üîÑ Faza 4: Component Migration Assistant (Tydzie≈Ñ 4-5)

### 4.1 AST Parser & Transformer (4-5h)

**Technologie:**
- `@babel/parser` - Parsing JavaScript/TypeScript
- `@babel/traverse` - AST traversal
- `@babel/generator` - Code generation

**Implementacja:**
- `packages/migration-assistant/src/parser.ts`
- `packages/migration-assistant/src/transformer.ts`
- `packages/migration-assistant/src/generator.ts`

**Features:**
- Parse JSX/TSX files
- Identify Fragment UI components
- Transform component usage
- Generate migrated code

---

### 4.2 Migration Rules Engine (3-4h)

**Migration Rules:**
- Component API changes (props renamed/removed)
- Component structure changes
- Import path changes
- Breaking changes handling

**Implementacja:**
- `packages/migration-assistant/src/rules/`
- Rule definitions (JSON/YAML)
- Rule execution engine
- Rule validation

**Przyk≈Çad Rule:**
```json
{
  "from": "v1.6.0",
  "to": "v1.7.0",
  "rules": [
    {
      "component": "Button",
      "changes": [
        {
          "type": "prop-rename",
          "from": "variant",
          "to": "appearance",
          "values": {
            "default": "solid",
            "outline": "outline"
          }
        }
      ]
    }
  ]
}
```

---

### 4.3 Migration CLI Tool (3-4h)

**CLI Commands:**
- `ds migrate check` - Check migration needs
- `ds migrate preview` - Preview migration changes
- `ds migrate apply` - Apply migration
- `ds migrate rollback` - Rollback migration

**Implementacja:**
- `packages/cli/src/commands/migrate.ts`
- Integration z migration assistant
- File system operations
- Backup before migration

**Usage:**
```bash
# Check what needs migration
ds migrate check --from v1.6.0 --to v1.7.0

# Preview changes
ds migrate preview --from v1.6.0 --to v1.7.0

# Apply migration
ds migrate apply --from v1.6.0 --to v1.7.0

# Rollback
ds migrate rollback
```

---

## üè¢ Faza 5: Design System Governance Dashboard (Tydzie≈Ñ 5-6)

### 5.1 Governance Data Model (3-4h)

**Data Model:**
- Projects tracking
- Component usage compliance
- Design token compliance
- Version adoption tracking
- Policy definitions

**Database Schema:**
```sql
CREATE TABLE projects (
  id INTEGER PRIMARY KEY,
  name TEXT NOT NULL,
  repository_url TEXT,
  current_version TEXT,
  last_check DATETIME,
  compliance_score REAL
);

CREATE TABLE compliance_checks (
  id INTEGER PRIMARY KEY,
  project_id INTEGER,
  check_type TEXT, -- 'component_usage', 'token_usage', 'version'
  status TEXT, -- 'pass', 'fail', 'warning'
  details TEXT, -- JSON
  timestamp DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE policies (
  id INTEGER PRIMARY KEY,
  name TEXT NOT NULL,
  type TEXT, -- 'component_usage', 'token_usage', 'version'
  rules TEXT, -- JSON
  enabled BOOLEAN DEFAULT 1
);
```

---

### 5.2 Compliance Engine (4-5h)

**Features:**
- Component usage compliance checking
- Design token compliance checking
- Version adoption tracking
- Policy enforcement
- Compliance scoring

**Implementacja:**
- `packages/governance/src/compliance-engine.ts`
- `packages/governance/src/policy-engine.ts`
- `packages/governance/src/scoring.ts`

**Compliance Checks:**
- Component usage (czy u≈ºywane sƒÖ tylko dozwolone komponenty)
- Token usage (czy u≈ºywane sƒÖ tylko design tokens)
- Version adoption (czy projekty sƒÖ na najnowszej wersji)
- Deprecation warnings (czy u≈ºywane sƒÖ deprecated komponenty)

---

### 5.3 Governance Dashboard UI (5-7h)

**Features:**
- Projects overview
- Compliance dashboard
- Policy management
- Compliance reports
- Trends & analytics

**Implementacja:**
- `apps/www/app/tools/governance/page.tsx`
- Components:
  - `ProjectsOverview`
  - `ComplianceDashboard`
  - `PolicyManager`
  - `ComplianceReports`
  - `ComplianceTrends`

**UI Sections:**
1. **Overview** - Summary stats, compliance score
2. **Projects** - Lista projekt√≥w z compliance status
3. **Policies** - Policy management
4. **Reports** - Compliance reports
5. **Analytics** - Trends & insights

---

## üìã Plan Implementacji (Timeline)

### Tydzie≈Ñ 1-2: Nowe Komponenty
- **Dzie≈Ñ 1-2:** Segmented Control + Rating
- **Dzie≈Ñ 3-4:** File Upload
- **Dzie≈Ñ 5-6:** Split Button + Tag Input
- **Dzie≈Ñ 7:** Testy, dokumentacja, registry

### Tydzie≈Ñ 2-3: Optymalizacje
- **Dzie≈Ñ 1-2:** React.memo optymalizacje
- **Dzie≈Ñ 3:** useMemo/useCallback
- **Dzie≈Ñ 4-5:** Loading States
- **Dzie≈Ñ 6:** Error States
- **Dzie≈Ñ 7:** Testy wydajno≈õciowe

### Tydzie≈Ñ 3-4: Analytics Dashboard
- **Dzie≈Ñ 1-2:** Telemetry enhancement
- **Dzie≈Ñ 3:** API endpoints
- **Dzie≈Ñ 4-5:** Dashboard UI
- **Dzie≈Ñ 6:** Testy, dokumentacja
- **Dzie≈Ñ 7:** Polish & refinement

### Tydzie≈Ñ 4-5: Migration Assistant
- **Dzie≈Ñ 1-2:** AST Parser & Transformer
- **Dzie≈Ñ 3:** Migration Rules Engine
- **Dzie≈Ñ 4-5:** CLI Tool
- **Dzie≈Ñ 6:** Testy, dokumentacja
- **Dzie≈Ñ 7:** Polish & refinement

### Tydzie≈Ñ 5-6: Governance Dashboard
- **Dzie≈Ñ 1:** Data Model
- **Dzie≈Ñ 2-3:** Compliance Engine
- **Dzie≈Ñ 4-6:** Dashboard UI
- **Dzie≈Ñ 7:** Testy, dokumentacja, polish

### Tydzie≈Ñ 7-8: Integration & Testing
- **Dzie≈Ñ 1-3:** Integration testing
- **Dzie≈Ñ 4-5:** E2E testing
- **Dzie≈Ñ 6:** Documentation
- **Dzie≈Ñ 7:** Release preparation

---

## üéØ Success Criteria

### Nowe Komponenty
- ‚úÖ 5 nowych komponent√≥w zaimplementowanych
- ‚úÖ Wszystkie komponenty majƒÖ Storybook stories
- ‚úÖ Wszystkie komponenty majƒÖ testy (unit + a11y)
- ‚úÖ Dokumentacja dla wszystkich komponent√≥w
- ‚úÖ Registry entries dla wszystkich komponent√≥w

### Optymalizacje
- ‚úÖ React.memo dodane do 20+ komponent√≥w
- ‚úÖ useMemo/useCallback w 10+ komponentach
- ‚úÖ Loading states w 10+ komponentach
- ‚úÖ Error states w 10+ komponentach
- ‚úÖ 20%+ poprawa wydajno≈õci (Lighthouse score)

### Analytics Dashboard
- ‚úÖ Component usage tracking dzia≈Ça
- ‚úÖ API endpoints dzia≈ÇajƒÖ
- ‚úÖ Dashboard UI kompletny
- ‚úÖ Heatmap visualization dzia≈Ça
- ‚úÖ Trends charts dzia≈ÇajƒÖ

### Migration Assistant
- ‚úÖ AST parser dzia≈Ça
- ‚úÖ Migration rules engine dzia≈Ça
- ‚úÖ CLI tool dzia≈Ça
- ‚úÖ Preview mode dzia≈Ça
- ‚úÖ Rollback dzia≈Ça

### Governance Dashboard
- ‚úÖ Compliance engine dzia≈Ça
- ‚úÖ Policy engine dzia≈Ça
- ‚úÖ Dashboard UI kompletny
- ‚úÖ Compliance reports dzia≈ÇajƒÖ
- ‚úÖ Trends & analytics dzia≈ÇajƒÖ

---

## üì¶ Nowe Pakiety

1. **@fragment_ui/migration-assistant** (v0.1.0)
   - AST parser & transformer
   - Migration rules engine
   - CLI integration

2. **@fragment_ui/governance** (v0.1.0)
   - Compliance engine
   - Policy engine
   - Scoring system

---

## üîó Zale≈ºno≈õci

### Nowe zale≈ºno≈õci:
- `@babel/parser` - AST parsing
- `@babel/traverse` - AST traversal
- `@babel/generator` - Code generation
- `react-dropzone` - File upload (opcjonalnie)
- `recharts` - Charts dla analytics/governance

---

## üìö Dokumentacja

### Nowe strony dokumentacji:
1. `/docs/components/segmented-control`
2. `/docs/components/rating`
3. `/docs/components/file-upload`
4. `/docs/components/split-button`
5. `/docs/components/tag-input`
6. `/docs/tools/analytics`
7. `/docs/tools/migration-assistant`
8. `/docs/tools/governance`

### Nowe guide'y:
1. `/docs/guides/performance-optimization`
2. `/docs/guides/component-migration`
3. `/docs/guides/governance`

---

*Ostatnia aktualizacja: 2025-01-05*

